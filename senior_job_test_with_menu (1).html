<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏãúÎãàÏñ¥ Ïû¨Ï∑®ÏóÖ Ï†ÅÏÑ± Í≤ÄÏÇ¨ - ÎÇòÏóêÍ≤å ÎßûÎäî ÏßÅÏóÖ Ï∞æÍ∏∞</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üëî</text></svg>">
    
    <!-- Supabase ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ï∂îÍ∞Ä -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
        }

        /* ÏôºÏ™Ω ÏÇ¨Ïù¥ÎìúÎ∞î Î©îÎâ¥ */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            padding: 30px 0;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 0 30px 30px;
            border-bottom: 1px solid rgba(102, 126, 234, 0.2);
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .sidebar-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .sidebar-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #333;
            line-height: 1.2;
        }

        .sidebar-subtitle {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .sidebar-menu {
            padding: 30px 0;
        }

        .menu-section {
            margin-bottom: 30px;
        }

        .menu-section-title {
            font-size: 0.8em;
            color: #999;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 0 30px 15px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 30px;
            color: #555;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            font-weight: 500;
        }

        .menu-item:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            border-left-color: #667eea;
            transform: translateX(5px);
        }

        .menu-item.active {
            background: rgba(102, 126, 234, 0.15);
            color: #667eea;
            border-left-color: #667eea;
        }

        .menu-item-icon {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .submenu {
            margin-left: 50px;
            border-left: 2px solid rgba(102, 126, 234, 0.1);
        }

        .submenu .menu-item {
            padding: 12px 20px;
            font-size: 0.95em;
            border-left: none;
        }

        .submenu .menu-item:hover {
            transform: translateX(3px);
        }

        /* Î™®Î∞îÏùº Î©îÎâ¥ ÌÜ†Í∏Ä Î≤ÑÌäº */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 200;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ */
        .main-content {
            margin-left: 280px;
            flex: 1;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            animation: fadeInDown 0.8s ease;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .content {
            padding: 40px;
        }

        .start-screen {
            text-align: center;
            animation: fadeIn 0.8s ease;
        }

        .start-screen h2 {
            color: #333;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .start-screen p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .visitor-counter {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            display: inline-block;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            animation: fadeIn 0.8s ease 0.4s both;
        }

        .visitor-stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: center;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item h3 {
            color: #667eea;
            font-size: 0.9em;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .visitor-count {
            color: #764ba2;
            font-size: 1.8em;
            font-weight: 900;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        /* ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌôîÎ©¥ Ïä§ÌÉÄÏùº */
        .location-screen {
            display: none;
            text-align: center;
            animation: fadeIn 0.8s ease;
        }

        .location-screen h2 {
            color: #333;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .location-screen p {
            color: #666;
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 30px;
        }

        .location-input-container {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .location-input {
            width: 100%;
            padding: 20px;
            font-size: 1.2em;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
            text-align: center;
            background: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }

        .location-input:focus {
            border-color: #667eea;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .location-input::placeholder {
            color: #adb5bd;
            font-style: italic;
        }

        .location-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
            margin-top: 20px;
        }

        .location-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }

        .location-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .back-btn {
            background: #e9ecef;
            color: #495057;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 15px;
        }

        .back-btn:hover {
            background: #dee2e6;
        }

        .question-screen {
            display: none;
            animation: slideIn 0.5s ease;
        }

        .question-number {
            color: #667eea;
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .question-text {
            color: #333;
            font-size: 1.4em;
            font-weight: 600;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background: #f0f2ff;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .option.selected {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-color: #667eea;
        }

        .option-letter {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: 600;
            margin-right: 15px;
        }

        .option-text {
            color: #333;
            font-size: 1.1em;
            display: inline-block;
            vertical-align: middle;
            width: calc(100% - 70px);
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            gap: 20px;
        }

        .nav-btn {
            background: #e9ecef;
            color: #495057;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: #dee2e6;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn.next {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .nav-btn.next:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .result-screen {
            display: none;
            animation: fadeIn 0.8s ease;
        }

        .result-title {
            text-align: center;
            color: #333;
            font-size: 2em;
            margin-bottom: 30px;
        }

        .recommended-jobs {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .job-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .job-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }

        .job-rank {
            display: inline-block;
            width: 30px;
            height: 30px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 15px;
            font-size: 0.9em;
        }

        .job-name {
            font-size: 1.3em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .job-match {
            color: #667eea;
            font-weight: 600;
            float: right;
        }

        .job-description {
            color: #666;
            line-height: 1.6;
            margin-top: 10px;
        }

        .restart-btn {
            display: block;
            margin: 30px auto 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .qualification-screen {
            display: none;
            animation: fadeIn 0.8s ease;
            text-align: center;
        }

        .qualification-screen h2 {
            color: #333;
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .selected-job {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .selected-job-name {
            color: #667eea;
            font-size: 1.4em;
            font-weight: 600;
        }

        .qualification-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 500px;
            margin: 0 auto;
        }

        .qual-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
        }

        .qual-option:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .qual-option h3 {
            color: #333;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .qual-option p {
            color: #666;
            font-size: 1em;
            line-height: 1.5;
        }

        .back-to-results {
            margin-top: 30px;
            background: #e9ecef;
            color: #495057;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-to-results:hover {
            background: #dee2e6;
        }

        /* Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú Ïä§ÌÉÄÏùº */
        .main-dashboard {
            text-align: center;
            animation: fadeIn 0.8s ease;
            padding: 20px 0;
            height: calc(100vh - 200px); /* Ìó§ÎçîÎ•º Ï†úÏô∏Ìïú Ï†ÑÏ≤¥ ÎÜíÏù¥ */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .service-cards {
            display: flex !important;
            flex-direction: row !important; /* Ï¢åÏö∞ Î∞∞Ïπò Í∞ïÏ†ú */
            flex-wrap: nowrap !important; /* Ï§ÑÎ∞îÍøà Î∞©ÏßÄ */
            gap: 30px;
            margin-top: 30px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            align-items: stretch;
            justify-content: center;
        }

        .service-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(248, 249, 250, 0.9) 100%);
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 20px;
            padding: 30px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            flex: 1; /* Ïπ¥ÎìúÎì§Ïù¥ ÎèôÏùºÌïú ÎÑàÎπÑÎ•º Í∞ÄÏßÄÎèÑÎ°ù */
            max-width: 450px;
            min-width: 300px;
            min-height: 320px;
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 50px rgba(102, 126, 234, 0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .service-card:hover::before {
            opacity: 1;
        }

        .card-icon {
            font-size: 3.5em;
            margin-bottom: 15px;
            display: block;
        }

        .service-card h3 {
            color: #333;
            font-size: 1.4em;
            font-weight: 700;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .service-card p {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        .card-cta {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1em;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .service-card:hover .card-cta {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        /* ÏûêÍ≤©Ï¶ù Ïπ¥Îìú Ïä§ÌÉÄÏùº */
        .service-card:nth-child(2)::before {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .service-card:nth-child(2) .card-cta {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }

        .service-card:nth-child(2):hover .card-cta {
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }

        .service-card:nth-child(2):hover {
            box-shadow: 0 20px 50px rgba(40, 167, 69, 0.2);
            border-color: rgba(40, 167, 69, 0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ÌÉúÎ∏îÎ¶ø Î∞òÏùëÌòï - Ï¢åÏö∞ Î∞∞Ïπò Ïú†ÏßÄ */
        @media (max-width: 1024px) and (min-width: 769px) {
            .sidebar {
                width: 250px;
            }
            
            .main-content {
                margin-left: 250px;
            }
            
            .service-cards {
                display: flex !important;
                flex-direction: row !important; /* ÌÉúÎ∏îÎ¶øÏóêÏÑúÎèÑ Ï¢åÏö∞ Î∞∞Ïπò Í∞ïÏ†ú */
                flex-wrap: nowrap !important;
                gap: 25px;
                max-width: 800px;
            }
            
            .service-card {
                padding: 25px 20px;
                min-height: 300px;
                max-width: 380px;
                min-width: 280px;
            }
            
            .card-icon {
                font-size: 3.2em;
            }
            
            .service-card h3 {
                font-size: 1.3em;
            }
            
            .service-card p {
                font-size: 0.9em;
            }
        }

        /* Î™®Î∞îÏùº Î∞òÏùëÌòï - ÏÑ∏Î°ú Î∞∞ÏπòÎßå ÌóàÏö© */
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }

            .sidebar {
                transform: translateX(-100%);
                width: 100%;
                max-width: 280px;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 80px 20px 20px;
            }

            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .question-text {
                font-size: 1.2em;
            }
            
            .option-text {
                font-size: 1em;
            }

            .visitor-stats {
                flex-direction: column;
                gap: 15px;
            }

            .service-cards {
                flex-direction: column; /* Î™®Î∞îÏùºÏóêÏÑúÎßå ÏÑ∏Î°ú Î∞∞Ïπò */
                gap: 20px;
                margin-top: 20px;
            }

            .main-dashboard {
                height: auto; /* Î™®Î∞îÏùºÏóêÏÑúÎäî ÎÜíÏù¥ Ï†úÌïú Ìï¥Ï†ú */
                padding: 15px 0;
            }

            .main-dashboard h2 {
                font-size: 1.6em !important;
                margin-bottom: 15px !important;
            }

            .service-card {
                padding: 25px 20px;
                min-height: 240px;
                max-width: 100%;
            }

            .card-icon {
                font-size: 3em;
                margin-bottom: 12px;
            }

            .service-card h3 {
                font-size: 1.3em;
                margin-bottom: 12px;
            }

            .service-card p {
                font-size: 0.9em;
                margin-bottom: 15px;
            }
        }

        /* ÏÇ¨Ïù¥ÎìúÎ∞î Ïò§Î≤ÑÎ†àÏù¥ (Î™®Î∞îÏùº) */
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 50;
        }

        @media (max-width: 768px) {
            .sidebar-overlay.show {
                display: block;
            }
        }
    </style>
</head>
<body>
    <!-- Î™®Î∞îÏùº Î©îÎâ¥ ÌÜ†Í∏Ä Î≤ÑÌäº -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- ÏÇ¨Ïù¥ÎìúÎ∞î Ïò§Î≤ÑÎ†àÏù¥ (Î™®Î∞îÏùº) -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleMobileMenu()"></div>

    <!-- ÏôºÏ™Ω ÏÇ¨Ïù¥ÎìúÎ∞î Î©îÎâ¥ -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <div class="sidebar-logo-icon">üëî</div>
                <div>
                    <div class="sidebar-title">ÏãúÎãàÏñ¥ ÏºÄÏñ¥</div>
                    <div class="sidebar-subtitle">50+ Ï†ÑÏö© ÏÑúÎπÑÏä§</div>
                </div>
            </div>
        </div>

        <div class="sidebar-menu">
            <div class="menu-section">
                <div class="menu-section-title">ÌÖåÏä§Ìä∏</div>
                <a href="javascript:void(0)" class="menu-item" onclick="showJobTest(); toggleMobileMenu();">
                    <div class="menu-item-icon">üéØ</div>
                    ÎÇòÏóêÍ≤å ÎßûÎäî ÏßÅÏóÖ Ï∞æÍ∏∞
                </a>
                <a href="javascript:void(0)" class="menu-item" onclick="showCertificationTest(); toggleMobileMenu();">
                    <div class="menu-item-icon">üìú</div>
                    ÎÇòÏóêÍ≤å ÎßûÎäî ÏûêÍ≤©Ï¶ù Ï∞æÍ∏∞
                </a>
            </div>

            <div class="menu-section">
                <div class="menu-section-title">ÏÉÅÎã¥</div>
                <a href="javascript:void(0)" class="menu-item" onclick="openObiseoApp(); toggleMobileMenu();">
                    <div class="menu-item-icon">üíº</div>
                    Ï∑®ÏóÖ ÏÉÅÎã¥
                </a>
            </div>
        </div>
    </div>

    <!-- Î©îÏù∏ Ïª®ÌÖêÏ∏† ÏòÅÏó≠ -->
    <div class="main-content">
        <div class="container">
            <div class="header">
                <h1>ÏãúÎãàÏñ¥ ÏºÄÏñ¥ ÏÑúÎπÑÏä§</h1>
                <p>50+ Ï†ÑÏö© ÎßûÏ∂§Ìòï ÏßÑÎ°ú Î∞è Ï∑®ÏóÖ ÏßÄÏõê ÏÑúÎπÑÏä§</p>
            </div>
            
            <div class="content">
                <!-- Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú -->
                <div class="main-dashboard" id="mainDashboard">
                    <h2 style="text-align: center; color: #333; font-size: 1.8em; margin-bottom: 20px;">Ïñ¥Îñ§ ÏÑúÎπÑÏä§Î•º Ïù¥Ïö©ÌïòÏãúÍ≤†Ïñ¥Ïöî?</h2>
                    
                    <div class="service-cards">
                        <div class="service-card" onclick="showJobTest()">
                            <div class="card-icon">üéØ</div>
                            <h3>ÎÇòÏóêÍ≤å ÎßûÎäî ÏßÅÏóÖ Ï∞æÍ∏∞</h3>
                            <p>
                                10Í∞úÏùò ÏßàÎ¨∏ÏúºÎ°ú 50ÎåÄ Ïù¥ÏÉÅ ÏãúÎãàÏñ¥ÏóêÍ≤å<br>
                                Ï†ÅÌï©Ìïú Ïû¨Ï∑®ÏóÖ ÏßÅÏ¢ÖÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§.<br>
                                Í≤ΩÌóòÍ≥º ÏÑ†Ìò∏ÎèÑÎ•º Î∞îÌÉïÏúºÎ°ú ÎßûÏ∂§ ÏßÅÏóÖÏùÑ Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî.
                            </p>
                            <div class="card-cta">ÏãúÏûëÌïòÍ∏∞ ‚Üí</div>
                        </div>
                        
                        <div class="service-card" onclick="showCertificationTest()">
                            <div class="card-icon">üìú</div>
                            <h3>ÎÇòÏóêÍ≤å ÎßûÎäî ÏûêÍ≤©Ï¶ù Ï∞æÍ∏∞</h3>
                            <p>
                                ÎÇ¥ÏùºÎ∞∞ÏõÄÏπ¥ÎìúÎ°ú Íµ≠ÎπÑÏßÄÏõê Î∞õÏùÑ Ïàò ÏûàÎäî<br>
                                ÏûêÍ≤©Ï¶ù Ï§ë Í∞ÄÏû• Ï†ÅÌï©Ìïú Î∂ÑÏïºÎ•º Ï∂îÏ≤úÌï©ÎãàÎã§.<br>
                                ÏÉàÎ°úÏö¥ Í∏∞Ïà†ÏùÑ Î∞∞Ïõå Ï†ÑÎ¨∏ÏÑ±ÏùÑ ÌÇ§ÏõåÎ≥¥ÏÑ∏Ïöî.
                            </p>
                            <div class="card-cta">ÏãúÏûëÌïòÍ∏∞ ‚Üí</div>
                        </div>
                    </div>
                </div>

                <!-- ÏßÅÏóÖ Í≤ÄÏÇ¨ ÏòÅÏó≠ (Ïà®ÍπÄ) -->
                <div class="job-test-container" id="jobTestContainer" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    
                    <!-- ÏãúÏûë ÌôîÎ©¥ -->
                    <div class="start-screen" id="startScreen" style="padding-top: 20px;">
                        <h2>ÎÇòÏóêÍ≤å ÎßûÎäî ÏßÅÏóÖ Ï∞æÍ∏∞</h2>
                        <p>
                            Ïù¥ Í≤ÄÏÇ¨Îäî Í∑ÄÌïòÏùò Í≤ΩÌóò, ÏÑ†Ìò∏ÎèÑ, Ïó≠ÎüâÏùÑ Î∞îÌÉïÏúºÎ°ú<br>
                            50ÎåÄ Ïù¥ÏÉÅ ÏãúÎãàÏñ¥ÏóêÍ≤å Ï†ÅÌï©Ìïú Ïû¨Ï∑®ÏóÖ ÏßÅÏ¢ÖÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§.<br><br>
                            Ï¥ù 10Í∞úÏùò ÏßàÎ¨∏Ïóê ÎãµÌï¥Ï£ºÏãúÎ©¥,<br>
                            Í∞ÄÏû• Ï†ÅÌï©Ìïú ÏßÅÏóÖ 3Í∞ÄÏßÄÎ•º Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§.
                        </p>
                        <button class="btn" onclick="showLocationScreen()">Í≤ÄÏÇ¨ ÏãúÏûëÌïòÍ∏∞</button>
                        <div style="margin-top: 20px;">
                            <button class="back-btn" onclick="backToMainDashboard()">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                        </div>
                    </div>

                    <!-- ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌôîÎ©¥ -->
                    <div class="location-screen" id="locationScreen">
                        <h2>Í±∞Ï£º ÏßÄÏó≠ÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî</h2>
                        <p>
                            Îçî Ï†ïÌôïÌïú Ï∑®ÏóÖ Ï†ïÎ≥¥ Ï†úÍ≥µÏùÑ ÏúÑÌï¥<br>
                            ÌòÑÏû¨ Í±∞Ï£ºÌïòÍ≥† Í≥ÑÏã† ÏßÄÏó≠Íµ¨Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.
                        </p>
                        <div class="location-input-container">
                            <input 
                                type="text" 
                                id="locationInput" 
                                class="location-input" 
                                placeholder="Ïòà : ÏÑ±ÎèôÍµ¨"
                                maxlength="20"
                                onkeypress="handleLocationKeypress(event)"
                                oninput="checkLocationInput()"
                            >
                            <div style="margin-top: 15px;">
                                <button class="back-btn" onclick="backToStart()">Ïù¥Ï†Ñ</button>
                                <button class="location-btn" id="locationBtn" onclick="submitLocation()" disabled>
                                    Í≤ÄÏÇ¨ ÏãúÏûëÌïòÍ∏∞
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ÏßàÎ¨∏ ÌôîÎ©¥ -->
                    <div class="question-screen" id="questionScreen">
                        <div class="question-number" id="questionNumber">ÏßàÎ¨∏ 1/10</div>
                        <h2 class="question-text" id="questionText"></h2>
                        <div class="options" id="options"></div>
                        <div class="navigation">
                            <button class="nav-btn" id="prevBtn" onclick="prevQuestion()">Ïù¥Ï†Ñ</button>
                        </div>
                    </div>
                    
                    <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
                    <div class="result-screen" id="resultScreen">
                        <h2 class="result-title">ÎãπÏã†ÏóêÍ≤å Ï∂îÏ≤úÌïòÎäî ÏßÅÏóÖ</h2>
                        <div class="recommended-jobs" id="recommendedJobs"></div>
                        <button class="restart-btn" onclick="restartTest()">Îã§Ïãú Í≤ÄÏÇ¨ÌïòÍ∏∞</button>
                        <div style="margin-top: 20px;">
                            <button class="back-btn" onclick="backToMainDashboard()">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú ÌëúÏãú
        function showMainDashboard() {
            // Î©îÎâ¥ active ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            updateMenuActive(null);
            
            // mainDashboard ÏöîÏÜåÍ∞Ä Ï°¥Ïû¨ÌïòÎäîÏßÄ ÌôïÏù∏
            const mainDashboard = document.getElementById('mainDashboard');
            if (!mainDashboard) {
                // ÏöîÏÜåÍ∞Ä ÏóÜÏúºÎ©¥ ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®
                location.reload();
                return;
            }
            
            // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            mainDashboard.style.display = 'block';
            
            const jobContainer = document.getElementById('jobTestContainer');
            if (jobContainer) {
                jobContainer.style.display = 'none';
            }
            
            // ÏûêÍ≤©Ï¶ù Í¥ÄÎ†® Ïä§ÌÉÄÏùº Ï†úÍ±∞
            const certStyles = document.getElementById('cert-styles');
            if (certStyles) {
                certStyles.remove();
            }
        }

        // Î©îÏù∏ ÎåÄÏãúÎ≥¥ÎìúÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function backToMainDashboard() {
            // Î©îÎâ¥ active ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            updateMenuActive(null);
            
            // ÏßÅÏóÖ Í≤ÄÏÇ¨ Ï¥àÍ∏∞Ìôî
            currentQuestion = 0;
            answers = [];
            selectedAnswers = [];
            selectedOption = null;
            selectedJob = null;
            userLocation = '';
            
            // Î™®Îì† ÏßÅÏóÖ Í≤ÄÏÇ¨ ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('locationScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('jobTestContainer').style.display = 'none';
            
            // Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú ÌëúÏãú
            document.getElementById('mainDashboard').style.display = 'block';
            
            // ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î Ï¥àÍ∏∞Ìôî
            document.getElementById('progressFill').style.width = '0%';
            
            // ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî
            const locationInput = document.getElementById('locationInput');
            if (locationInput) {
                locationInput.value = '';
                checkLocationInput();
            }
        }

        // ÏßÅÏóÖ Í≤ÄÏÇ¨ ÏãúÏûë
        function showJobTest() {
            // Î©îÎâ¥ active ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            updateMenuActive(document.querySelector('[onclick="showJobTest()"]'));
            
            // Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú Ïà®Í∏∞Í∏∞
            document.getElementById('mainDashboard').style.display = 'none';
            
            // ÏßÅÏóÖ Í≤ÄÏÇ¨ Ïª®ÌÖåÏù¥ÎÑà ÌëúÏãú
            document.getElementById('jobTestContainer').style.display = 'block';
            document.getElementById('startScreen').style.display = 'block';
            
            // ÏßÅÏóÖ Í≤ÄÏÇ¨ Ï¥àÍ∏∞Ìôî
            currentQuestion = 0;
            answers = [];
            selectedAnswers = [];
            selectedOption = null;
            selectedJob = null;
            userLocation = '';
            
            // ÌîÑÎ°úÍ∑∏Î†àÏä§ Î∞î Ï¥àÍ∏∞Ìôî
            document.getElementById('progressFill').style.width = '0%';
        }

        // Î™®Î∞îÏùº Î©îÎâ¥ ÌÜ†Í∏Ä Ìï®Ïàò
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('mobile-open');
            overlay.classList.toggle('show');
        }

        // Ïò§ÎπÑÏÑú Ïï± Ïó¥Í∏∞ Ìï®Ïàò
        function openObiseoApp() {
            window.open('https://play.google.com/store/apps/details?id=chatGPT_for_senior.myapplication&hl=ko', '_blank');
        }

        // "Ï§ÄÎπÑ Ï§ë" Î©îÏãúÏßÄ ÌëúÏãú Ìï®Ïàò
        function showComingSoon(serviceName) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 40px;
                border-radius: 20px;
                max-width: 400px;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `;
            
            modalContent.innerHTML = `
                <h2 style="color: #333; margin-bottom: 20px;">${serviceName}</h2>
                <p style="color: #666; line-height: 1.8; margin-bottom: 30px;">
                    Ìï¥Îãπ ÏÑúÎπÑÏä§Îäî ÌòÑÏû¨ Í∞úÎ∞ú Ï§ëÏûÖÎãàÎã§.<br>
                    Îπ†Î•∏ ÏãúÏùº ÎÇ¥Ïóê ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï† ÏòàÏ†ïÏûÖÎãàÎã§.
                </p>
                <button onclick="document.body.removeChild(this.parentElement.parentElement);" 
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                               color: white; 
                               border: none; 
                               padding: 15px 30px; 
                               border-radius: 50px; 
                               cursor: pointer;
                               font-size: 1.1em;">
                    ÌôïÏù∏
                </button>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ ÌéòÏù¥ÏßÄ ÌëúÏãú Ìï®Ïàò
        function showCertificationTest() {
            // Î©îÎâ¥ active ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
            updateMenuActive(document.querySelector('[onclick="showCertificationTest()"]'));
            
            // ÌòÑÏû¨ Ïª®ÌÖåÏù¥ÎÑà ÎÇ¥Ïö©ÏùÑ ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨Î°ú ÍµêÏ≤¥
            const container = document.querySelector('.container');
            container.innerHTML = `
                <div class="header" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                    <h1>ÎÇ¥ÏùºÎ∞∞ÏõÄÏπ¥Îìú ÏûêÍ≤©Ï¶ù Ï†ÅÏÑ± Í≤ÄÏÇ¨</h1>
                    <p>10Í∞úÏùò ÏßàÎ¨∏ÏúºÎ°ú Ï∞æÎäî ÎÇòÏóêÍ≤å Îî± ÎßûÎäî ÏûêÍ≤©Ï¶ùÍ≥º ÏßÅÏóÖ</p>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="certProgressFill"></div>
                </div>
                
                <div class="content">
                    <!-- ÏãúÏûë ÌôîÎ©¥ -->
                    <div class="start-screen" id="certStartScreen">
                        <h2>ÌôòÏòÅÌï©ÎãàÎã§!</h2>
                        
                        <p>
                            Ïù¥ Í≤ÄÏÇ¨Îäî Í∑ÄÌïòÏùò Í¥ÄÏã¨ÏÇ¨, Îä•Î†•, ÏÑ†Ìò∏ÎèÑÎ•º Î∞îÌÉïÏúºÎ°ú<br>
                            ÎÇ¥ÏùºÎ∞∞ÏõÄÏπ¥ÎìúÎ°ú Íµ≠ÎπÑÏßÄÏõê Î∞õÏùÑ Ïàò ÏûàÎäî ÏûêÍ≤©Ï¶ù Ï§ë<br>
                            Í∞ÄÏû• Ï†ÅÌï©Ìïú Î∂ÑÏïºÎ•º Ï∂îÏ≤úÌï¥ÎìúÎ¶ΩÎãàÎã§.<br><br>
                            Ï¥ù 10Í∞úÏùò ÏßàÎ¨∏Ïóê ÎãµÌï¥Ï£ºÏãúÎ©¥,<br>
                            Ï∂îÏ≤ú ÏûêÍ≤©Ï¶ùÍ≥º Í¥ÄÎ†® ÏßÅÏóÖ 3Í∞ÄÏßÄÎ•º ÏïàÎÇ¥Ìï¥ÎìúÎ¶ΩÎãàÎã§.
                        </p>
                        <button class="btn" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);" onclick="showCertLocationScreen()">Í≤ÄÏÇ¨ ÏãúÏûëÌïòÍ∏∞</button>
                        <div style="margin-top: 20px;">
                            <button class="back-btn" onclick="backToJobTest()">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                        </div>
                    </div>

                    <!-- ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌôîÎ©¥ -->
                    <div class="location-screen" id="certLocationScreen" style="display: none;">
                        <h2>Í±∞Ï£º ÏßÄÏó≠ÏùÑ ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî</h2>
                        <p>
                            Îçî Ï†ïÌôïÌïú Ï∑®ÏóÖ Ï†ïÎ≥¥ Ï†úÍ≥µÏùÑ ÏúÑÌï¥<br>
                            ÌòÑÏû¨ Í±∞Ï£ºÌïòÍ≥† Í≥ÑÏã† ÏßÄÏó≠Íµ¨Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.
                        </p>
                        <div class="location-input-container" style="background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);">
                            <input 
                                type="text" 
                                id="certLocationInput" 
                                class="location-input" 
                                style="border-color: #e9ecef;"
                                placeholder="Ïòà : ÏÑ±ÎèôÍµ¨"
                                maxlength="20"
                                onkeypress="handleCertLocationKeypress(event)"
                                oninput="checkCertLocationInput()"
                            >
                            <div style="margin-top: 15px;">
                                <button class="back-btn" onclick="backToCertStart()">Ïù¥Ï†Ñ</button>
                                <button class="location-btn" id="certLocationBtn" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);" onclick="submitCertLocation()" disabled>
                                    Í≤ÄÏÇ¨ ÏãúÏûëÌïòÍ∏∞
                                </button>
                            </div>
                        </div>
                        <div style="margin-top: 20px;">
                            <button class="back-btn" onclick="backToJobTest()">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                        </div>
                    </div>
                    
                    <!-- ÏßàÎ¨∏ ÌôîÎ©¥ -->
                    <div class="question-screen" id="certQuestionScreen" style="display: none;">
                        <div class="question-number" id="certQuestionNumber" style="color: #28a745;">ÏßàÎ¨∏ 1/10</div>
                        <h2 class="question-text" id="certQuestionText"></h2>
                        <div class="options" id="certOptions"></div>
                        <div class="navigation">
                            <button class="nav-btn" id="certPrevBtn" onclick="prevCertQuestion()">Ïù¥Ï†Ñ</button>
                        </div>
                    </div>
                    
                    <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
                    <div class="result-screen" id="certResultScreen" style="display: none;">
                        <h2 class="result-title">ÎãπÏã†ÏóêÍ≤å Ï∂îÏ≤úÌïòÎäî ÏûêÍ≤©Ï¶ùÍ≥º ÏßÅÏóÖ</h2>
                        <div class="recommended-jobs" id="certRecommendedJobs" style="background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);"></div>
                        <button class="restart-btn" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);" onclick="restartCertTest()">Îã§Ïãú Í≤ÄÏÇ¨ÌïòÍ∏∞</button>
                        <div style="margin-top: 20px;">
                            <button class="back-btn" onclick="backToJobTest()">Î©îÏù∏ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                        </div>
                    </div>
                </div>
            `;

            // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨Ïö© CSS Ï∂îÍ∞Ä
            addCertificationStyles();
            
            // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Ï¥àÍ∏∞Ìôî
            initCertificationTest();
        }

        // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨Ïö© Ïä§ÌÉÄÏùº Ï∂îÍ∞Ä
        function addCertificationStyles() {
            const existingStyle = document.getElementById('cert-styles');
            if (existingStyle) {
                existingStyle.remove();
            }

            const style = document.createElement('style');
            style.id = 'cert-styles';
            style.textContent = `
                .cert-required {
                    background: #e8f5e8;
                    color: #155724;
                    padding: 8px 12px;
                    border-radius: 20px;
                    font-size: 0.85em;
                    font-weight: 600;
                    margin-top: 10px;
                    display: inline-block;
                }
                
                #certOptions .option:hover {
                    background: #e8f5e8;
                    border-color: #28a745;
                }
                
                #certOptions .option.selected {
                    background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);
                    border-color: #28a745;
                }
                
                #certOptions .option-letter {
                    background: #28a745;
                }
                
                #certLocationInput:focus {
                    border-color: #28a745;
                    box-shadow: 0 5px 20px rgba(40, 167, 69, 0.2);
                }
            `;
            document.head.appendChild(style);
        }

        // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Ï¥àÍ∏∞Ìôî
        function initCertificationTest() {
            window.certCurrentQuestion = 0;
            window.certAnswers = [];
            window.certSelectedAnswers = []; // ÏÑ†ÌÉùÌïú ÎãµÎ≥Ä Î≤àÌò∏ Ï†ÄÏû•Ïö©
            window.certSelectedOption = null;
            window.certUserLocation = '';
        }

        // ÏûêÍ≤©Ï¶ù Í¥ÄÎ†® ÏßÅÏóÖ Ïπ¥ÌÖåÍ≥†Î¶¨
        const certJobCategories = {
            "ÏßÄÍ≤åÏ∞® Ïö¥Ï†ÑÏõê": { 
                category: "Í±¥ÏÑ§Í∏∞Í≥Ñ", 
                physical: "medium", 
                technical: "medium", 
                environment: "outdoor",
                cert: "ÏßÄÍ≤åÏ∞®Ïö¥Ï†ÑÍ∏∞Îä•ÏÇ¨",
                description: "Ï∞ΩÍ≥†, Í≥µÏû•, Í±¥ÏÑ§ÌòÑÏû•ÏóêÏÑú ÏßÄÍ≤åÏ∞®Î•º Ïö¥Ï†ÑÌïòÏó¨ ÌôîÎ¨ºÏùÑ Ïö¥Î∞òÌïòÍ≥† Ï†ÅÏû¨ÌïòÎäî ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["Ïö¥Ï†Ñ", "Í∏∞Í≥Ñ", "Î¨ºÎ•ò"]
            },
            "Íµ¥ÏÇ≠Í∏∞ Ïö¥Ï†ÑÏõê": { 
                category: "Í±¥ÏÑ§Í∏∞Í≥Ñ", 
                physical: "medium", 
                technical: "medium", 
                environment: "outdoor",
                cert: "Íµ¥ÏÇ≠Í∏∞Ïö¥Ï†ÑÍ∏∞Îä•ÏÇ¨",
                description: "Í±¥ÏÑ§ÌòÑÏû•ÏóêÏÑú Íµ¥ÏÇ≠Í∏∞Î•º Ïö¥Ï†ÑÌïòÏó¨ ÌÜ†ÏÇ¨ Íµ¥Ï∞©, Ï†ïÏßÄÏûëÏóÖ Îì±ÏùÑ ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["Ïö¥Ï†Ñ", "Í±¥ÏÑ§", "Í∏∞Í≥Ñ"]
            },
            "ÌïúÏãù Ï°∞Î¶¨ÏÇ¨": { 
                category: "Ï°∞Î¶¨", 
                physical: "high", 
                technical: "medium", 
                environment: "indoor",
                cert: "ÌïúÏãùÏ°∞Î¶¨Í∏∞Îä•ÏÇ¨",
                description: "ÌïúÏãùÎãπ, Í∏âÏãùÏÜå, Ìò∏ÌÖî Îì±ÏóêÏÑú ÌïúÍµ≠ Ï†ÑÌÜµÏöîÎ¶¨Î•º Ï°∞Î¶¨ÌïòÍ≥† Î©îÎâ¥Î•º Í∞úÎ∞úÌï©ÎãàÎã§.",
                keywords: ["ÏöîÎ¶¨", "ÏùåÏãù", "ÏÑúÎπÑÏä§"]
            },
            "Î∞©Ïàò ÏãúÍ≥µ Í∏∞Ïà†Ïûê": { 
                category: "Í±¥ÏÑ§Í∏∞Ïà†", 
                physical: "high", 
                technical: "high", 
                environment: "outdoor",
                cert: "Î∞©ÏàòÍ∏∞Îä•ÏÇ¨",
                description: "Í±¥Î¨ºÏùò ÏßÄÎ∂ï, Ïô∏Î≤Ω, ÏßÄÌïòÏã§ Îì±Ïóê Î∞©Ïàò ÏûëÏóÖÏùÑ ÏàòÌñâÌïòÏó¨ ÎàÑÏàòÎ•º Î∞©ÏßÄÌï©ÎãàÎã§.",
                keywords: ["Í±¥ÏÑ§", "ÏãúÍ≥µ", "Í∏∞Ïà†"]
            },
            "Í±¥Ï∂ï ÎèÑÏû• Í∏∞Ïà†Ïûê": { 
                category: "Í±¥ÏÑ§Í∏∞Ïà†", 
                physical: "high", 
                technical: "medium", 
                environment: "mixed",
                cert: "Í±¥Ï∂ïÎèÑÏû•Í∏∞Îä•ÏÇ¨",
                description: "Í±¥Î¨º ÎÇ¥Ïô∏Î∂ÄÏóê ÌéòÏù∏Ìä∏ ÎèÑÏû• ÏûëÏóÖÏùÑ ÏàòÌñâÌïòÏó¨ Î≥¥Ìò∏ Î∞è ÎØ∏Í¥ÄÏùÑ Ìñ•ÏÉÅÏãúÌÇµÎãàÎã§.",
                keywords: ["Í±¥ÏÑ§", "ÎèÑÏû•", "ÎØ∏Ïà†"]
            },
            "ÏöîÏñëÎ≥¥Ìò∏ÏÇ¨": { 
                category: "ÎèåÎ¥Ñ", 
                physical: "medium", 
                technical: "low", 
                environment: "indoor",
                cert: "ÏöîÏñëÎ≥¥Ìò∏ÏÇ¨",
                description: "Í≥†Î†πÏûêÎÇò Ïû•Ïï†Ïù∏Ïùò ÏùºÏÉÅÏÉùÌôúÏùÑ ÏßÄÏõêÌïòÍ≥† Ïã†Ï≤¥ÌôúÎèôÏùÑ ÎèÑÏôÄÎìúÎ¶¨Îäî ÎèåÎ¥Ñ ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï©ÎãàÎã§.",
                keywords: ["ÎèåÎ¥Ñ", "Í∞ÑÎ≥ë", "ÏÑúÎπÑÏä§"]
            },
            "Í∞ÑÌò∏Ï°∞Î¨¥ÏÇ¨": { 
                category: "ÏùòÎ£å", 
                physical: "medium", 
                technical: "medium", 
                environment: "indoor",
                cert: "Í∞ÑÌò∏Ï°∞Î¨¥ÏÇ¨",
                description: "Î≥ëÏõê, ÏùòÏõêÏóêÏÑú Í∞ÑÌò∏ÏÇ¨Î•º Î≥¥Ï°∞ÌïòÏó¨ ÌôòÏûê ÎèåÎ¥ÑÍ≥º ÏùòÎ£å ÏßÄÏõê ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÏùòÎ£å", "Í∞ÑÌò∏", "ÌôòÏûê"]
            },
            "ÏÇ∞ÏóÖÏïàÏ†ÑÍ¥ÄÎ¶¨Ïûê": { 
                category: "ÏïàÏ†ÑÍ¥ÄÎ¶¨", 
                physical: "low", 
                technical: "high", 
                environment: "mixed",
                cert: "ÏÇ∞ÏóÖÏïàÏ†ÑÍ∏∞ÏÇ¨",
                description: "Í≥µÏû•, Í±¥ÏÑ§ÌòÑÏû• Îì±ÏóêÏÑú ÏïàÏ†ÑÏÇ¨Í≥† ÏòàÎ∞©Í≥º ÏïàÏ†Ñ ÍµêÏú°, ÏïàÏ†Ñ Ï†êÍ≤Ä ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÏïàÏ†Ñ", "Í¥ÄÎ¶¨", "ÏòàÎ∞©"]
            },
            "ÏúÑÌóòÎ¨º Í¥ÄÎ¶¨Ïûê": { 
                category: "ÏïàÏ†ÑÍ¥ÄÎ¶¨", 
                physical: "low", 
                technical: "high", 
                environment: "indoor",
                cert: "ÏúÑÌóòÎ¨ºÏÇ∞ÏóÖÍ∏∞ÏÇ¨",
                description: "ÌôîÌïôÍ≥µÏû•, Ï£ºÏú†ÏÜå Îì±ÏóêÏÑú ÏúÑÌóòÎ¨ºÏùò Ï†ÄÏû•, Ï∑®Í∏â, Í¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏïàÏ†ÑÌïòÍ≤å ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÌôîÌïô", "ÏïàÏ†Ñ", "Í¥ÄÎ¶¨"]
            },
            "ÌôòÍ≤Ω Í¥ÄÎ¶¨Ïûê": { 
                category: "ÌôòÍ≤ΩÍ¥ÄÎ¶¨", 
                physical: "low", 
                technical: "high", 
                environment: "mixed",
                cert: "ÎåÄÍ∏∞ÌôòÍ≤ΩÍ∏∞ÏÇ¨",
                description: "Í≥µÏû•, ÏÇ¨ÏóÖÏû•ÏóêÏÑú ÎåÄÍ∏∞Ïò§Ïóº Ï∏°Ï†ï, ÌôòÍ≤Ω Í¥ÄÎ¶¨, ÌôòÍ≤Ω Í∞úÏÑ† ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÌôòÍ≤Ω", "Ï∏°Ï†ï", "Í¥ÄÎ¶¨"]
            },
            "ÏÇ¨Î¨¥ÏßÅÏõê": { 
                category: "ÏÇ¨Î¨¥", 
                physical: "low", 
                technical: "medium", 
                environment: "indoor",
                cert: "Ïª¥Ìì®ÌÑ∞ÌôúÏö©Îä•Î†• 2Í∏â",
                description: "ÌöåÏÇ¨ÏóêÏÑú Î¨∏ÏÑú ÏûëÏÑ±, Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨, Í≥†Í∞ù ÏùëÎåÄ Îì± Îã§ÏñëÌïú ÏÇ¨Î¨¥ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["Ïª¥Ìì®ÌÑ∞", "ÏÇ¨Î¨¥", "Î¨∏ÏÑú"]
            },
            "Ï†úÎπµÏÇ¨": { 
                category: "Ï°∞Î¶¨", 
                physical: "medium", 
                technical: "medium", 
                environment: "indoor",
                cert: "Ï†úÎπµÍ∏∞Îä•ÏÇ¨",
                description: "Î≤†Ïù¥Ïª§Î¶¨, Ï†úÍ≥ºÏ†êÏóêÏÑú Îπµ, ÏºÄÏù¥ÌÅ¨, Í≥ºÏûê Îì±ÏùÑ Ï†úÏ°∞ÌïòÍ≥† ÌåêÎß§Ìï©ÎãàÎã§.",
                keywords: ["Ï†úÎπµ", "ÎîîÏ†ÄÌä∏", "Ï∞ΩÏóÖ"]
            },
            "Í±¥Ï∂ï ÏÑ§Í≥ÑÏÇ¨": { 
                category: "Í±¥Ï∂ïÏÑ§Í≥Ñ", 
                physical: "low", 
                technical: "high", 
                environment: "indoor",
                cert: "Í±¥Ï∂ïÍ∏∞ÏÇ¨",
                description: "Í±¥Ï∂ïÎ¨ºÏùò ÏÑ§Í≥Ñ, Í∞êÎ¶¨, ÏãúÍ≥µÍ¥ÄÎ¶¨ Îì± Í±¥Ï∂ï Ï†ÑÎ∞òÏùò Í∏∞Ïà† ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÏÑ§Í≥Ñ", "Í±¥Ï∂ï", "Í∏∞Ïà†"]
            },
            "ÏäπÍ∞ïÍ∏∞ Ï†ïÎπÑÏõê": { 
                category: "Ï†ÑÍ∏∞Í∏∞Í≥Ñ", 
                physical: "medium", 
                technical: "high", 
                environment: "indoor",
                cert: "ÏäπÍ∞ïÍ∏∞Í∏∞Îä•ÏÇ¨",
                description: "ÏäπÍ∞ïÍ∏∞Ïùò ÏÑ§Ïπò, Ï†êÍ≤Ä, Ï†ïÎπÑ Î∞è ÏïàÏ†ÑÍ¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÏäπÍ∞ïÍ∏∞", "Ï†ïÎπÑ", "ÏïàÏ†Ñ"]
            },
            "Ï†ÑÍ∏∞ Í∏∞Ïà†Ïûê": { 
                category: "Ï†ÑÍ∏∞Í∏∞Í≥Ñ", 
                physical: "medium", 
                technical: "high", 
                environment: "mixed",
                cert: "Ï†ÑÍ∏∞Í∏∞Îä•ÏÇ¨",
                description: "Ï†ÑÍ∏∞ÏÑ§ÎπÑÏùò ÏÑ§Ïπò, Ï†êÍ≤Ä, ÏàòÎ¶¨ Î∞è Ï†ÑÍ∏∞Í≥µÏÇ¨ ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["Ï†ÑÍ∏∞", "ÏÑ§ÎπÑ", "Í≥µÏÇ¨"]
            },
            "ÏóêÎÑàÏßÄÍ¥ÄÎ¶¨Ïûê": { 
                category: "ÌôòÍ≤ΩÍ¥ÄÎ¶¨", 
                physical: "low", 
                technical: "high", 
                environment: "indoor",
                cert: "ÏóêÎÑàÏßÄÍ¥ÄÎ¶¨Í∏∞Îä•ÏÇ¨",
                description: "ÏóêÎÑàÏßÄ ÏÇ¨Ïö©Îüâ Î∂ÑÏÑù, ÏóêÎÑàÏßÄ Ï†àÏïΩ Î∞©Ïïà ÏàòÎ¶Ω Î∞è Í¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÏóêÎÑàÏßÄ", "Ï†àÏïΩ", "Í¥ÄÎ¶¨"]
            },
            "Í≥µÏ°∞ÎÉâÎèô Í∏∞Ïà†Ïûê": { 
                category: "Í∏∞Í≥ÑÏÑ§ÎπÑ", 
                physical: "medium", 
                technical: "high", 
                environment: "mixed",
                cert: "Í≥µÏ°∞ÎÉâÎèôÍ∏∞Í≥ÑÍ∏∞Îä•ÏÇ¨",
                description: "ÎÉâÎÇúÎ∞© ÏãúÏÑ§, ÎÉâÎèôÏÑ§ÎπÑÏùò ÏÑ§Ïπò, Ïö¥Ï†Ñ, Ï†êÍ≤Ä Î∞è Ï†ïÎπÑ ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÎÉâÎèô", "Í≥µÏ°∞", "ÏÑ§ÎπÑ"]
            },
            "Ï°∞Í≤Ω Í∏∞Ïà†Ïûê": { 
                category: "Ï°∞Í≤Ω", 
                physical: "high", 
                technical: "medium", 
                environment: "outdoor",
                cert: "Ï°∞Í≤ΩÍ∏∞Îä•ÏÇ¨",
                description: "Í≥µÏõê, Ï†ïÏõê, ÎèÑÏãúÎÖπÏßÄ Îì±Ïùò Ï°∞Í≤Ω ÏÑ§Í≥Ñ, ÏãúÍ≥µ Î∞è Í¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["Ï°∞Í≤Ω", "Ï†ïÏõê", "ÏãùÎ¨º"]
            },
            "ÏÜåÎ∞©ÏÑ§ÎπÑ Í∏∞Ïà†Ïûê": { 
                category: "ÏïàÏ†ÑÍ¥ÄÎ¶¨", 
                physical: "medium", 
                technical: "high", 
                environment: "mixed",
                cert: "ÏÜåÎ∞©ÏÑ§ÎπÑÍ∏∞ÏÇ¨",
                description: "ÏÜåÎ∞©ÏÑ§ÎπÑÏùò ÏÑ§Í≥Ñ, ÏãúÍ≥µ, Ï†êÍ≤Ä Î∞è ÌôîÏû¨ ÏòàÎ∞© Í¥ÄÎ†® ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÏÜåÎ∞©", "ÌôîÏû¨ÏòàÎ∞©", "ÏÑ§ÎπÑ"]
            },
            "Í≤ΩÎπÑÏßÄÎèÑÏÇ¨": { 
                category: "Î≥¥Ïïà", 
                physical: "low", 
                technical: "medium", 
                environment: "mixed",
                cert: "Í≤ΩÎπÑÏßÄÎèÑÏÇ¨",
                description: "Í≤ΩÎπÑÏõêÏùò ÍµêÏú°, ÏßÄÎèÑ, Í∞êÎèÖ Î∞è Î≥¥ÏïàÍ≥ÑÌöç ÏàòÎ¶ΩÍ≥º Í¥ÄÎ¶¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["Î≥¥Ïïà", "Í≤ΩÎπÑ", "Í¥ÄÎ¶¨"]
            }
        };

        // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ ÏßàÎ¨∏Îì§
        const certQuestions = [
            {
                text: "Ïñ¥Îñ§ Ï¢ÖÎ•òÏùò ÏûëÏóÖ ÌôòÍ≤ΩÏùÑ ÏÑ†Ìò∏ÌïòÏãúÎÇòÏöî?",
                options: [
                    { text: "Ï£ºÎ°ú Ïã§ÎÇ¥ÏóêÏÑú ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { indoor: 3, outdoor: 0 } },
                    { text: "Ïã§ÎÇ¥Ïô∏Î•º Ïò§Í∞ÄÎ©∞ ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { indoor: 2, outdoor: 2 } },
                    { text: "Ï£ºÎ°ú ÏïºÏô∏ÏóêÏÑú ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { indoor: 0, outdoor: 3 } },
                    { text: "ÌôòÍ≤ΩÏóê ÏÉÅÍ¥ÄÏóÜÏù¥ ÏùºÌï† Ïàò ÏûàÏùå", value: { indoor: 1, outdoor: 1 } }
                ]
            },
            {
                text: "Ïú°Ï≤¥Ï†Å ÌôúÎèôÏóê ÎåÄÌïú ÏÑ†Ìò∏ÎèÑÎäî Ïñ¥Îñ†Ïã†Í∞ÄÏöî?",
                options: [
                    { text: "ÌôúÎ∞úÌïú Ïú°Ï≤¥ ÌôúÎèôÏùÑ ÏÑ†Ìò∏", value: { physical: 3 } },
                    { text: "Ï†ÅÎãπÌïú ÏõÄÏßÅÏûÑÏù¥ ÏûàÎäî ÏùºÏùÑ ÏÑ†Ìò∏", value: { physical: 2 } },
                    { text: "Í∞ÄÎ≤ºÏö¥ ÌôúÎèô Ï†ïÎèÑÎßå ÏÑ†Ìò∏", value: { physical: 1 } },
                    { text: "Ï£ºÎ°ú ÏïâÏïÑÏÑú ÌïòÎäî ÏùºÏùÑ ÏÑ†Ìò∏", value: { physical: 0 } }
                ]
            },
            {
                text: "Í∏∞Ïà†Ï†ÅÏù∏ ÏóÖÎ¨¥Ïóê ÎåÄÌïú Í¥ÄÏã¨ÎèÑÎäî?",
                options: [
                    { text: "Î≥µÏû°Ìïú Í∏∞Ïà†Í≥º Ï†ÑÎ¨∏ÏßÄÏãùÏùÑ ÌôúÏö©ÌïòÍ≥† Ïã∂Ïùå", value: { technical: 3 } },
                    { text: "Ï†ÅÎãπÌïú ÏàòÏ§ÄÏùò Í∏∞Ïà† ÏäµÎìùÏùÄ Í∞ÄÎä•", value: { technical: 2 } },
                    { text: "Í∞ÑÎã®Ìïú Í∏∞Ïà† Ï†ïÎèÑÎßå Î∞∞Ïö∞Í≥† Ïã∂Ïùå", value: { technical: 1 } },
                    { text: "Í∏∞Ïà†Î≥¥Îã§Îäî Îã®ÏàúÌïú ÏóÖÎ¨¥Î•º ÏÑ†Ìò∏", value: { technical: 0 } }
                ]
            },
            {
                text: "Í∞ÄÏû• Í¥ÄÏã¨ ÏûàÎäî Î∂ÑÏïºÎäî Î¨¥ÏóáÏù∏Í∞ÄÏöî?",
                options: [
                    { text: "Í±¥ÏÑ§¬∑Í∏∞Í≥Ñ Î∂ÑÏïº (Íµ¥ÏÇ≠Í∏∞, ÏßÄÍ≤åÏ∞® Îì±)", value: { construction: 3, machine: 3 } },
                    { text: "Ï°∞Î¶¨¬∑ÏöîÎ¶¨ Î∂ÑÏïº (ÌïúÏãù, Ï†úÎπµ Îì±)", value: { cooking: 3, food: 3 } },
                    { text: "ÏùòÎ£å¬∑ÎèåÎ¥Ñ Î∂ÑÏïº (Í∞ÑÌò∏, ÏöîÏñë Îì±)", value: { medical: 3, care: 3 } },
                    { text: "ÏïàÏ†Ñ¬∑ÌôòÍ≤Ω Î∂ÑÏïº (ÏïàÏ†ÑÍ¥ÄÎ¶¨, ÌôòÍ≤ΩÍ¥ÄÎ¶¨ Îì±)", value: { safety: 3, environment: 3 } }
                ]
            },
            {
                text: "ÏÇ¨ÎûåÎì§Í≥ºÏùò ÏÉÅÌò∏ÏûëÏö©Ïóê ÎåÄÌïú ÏÑ†Ìò∏ÎèÑÎäî?",
                options: [
                    { text: "ÎßéÏùÄ ÏÇ¨ÎûåÎì§Í≥º ÏßÄÏÜçÏ†ÅÏúºÎ°ú ÏÜåÌÜµÌïòÎ©∞ ÏùºÌïòÍ≥† Ïã∂Ïùå", value: { social: 3 } },
                    { text: "Ï†ÅÎãπÌïú ÏàòÏ§ÄÏùò ÏÇ¨ÎûåÎì§Í≥º ÌòëÎ†•ÌïòÎ©∞ ÏùºÌïòÍ≥† Ïã∂Ïùå", value: { social: 2 } },
                    { text: "ÏÜåÏàòÏùò ÎèôÎ£åÎì§Í≥º Ìï®Íªò ÏùºÌïòÍ≥† Ïã∂Ïùå", value: { social: 1 } },
                    { text: "ÌòºÏûê ÏßëÏ§ëÌï¥ÏÑú ÏùºÌïòÎäî Í≤ÉÏùÑ ÏÑ†Ìò∏", value: { social: 0 } }
                ]
            },
            {
                text: "ÏÉàÎ°úÏö¥ Í∏∞Ïà†Ïù¥ÎÇò ÏßÄÏãù ÏäµÎìùÏóê ÎåÄÌïú ÏùòÌñ•ÏùÄ?",
                options: [
                    { text: "Ï†ÅÍ∑πÏ†ÅÏúºÎ°ú ÏÉàÎ°úÏö¥ Í≤ÉÏùÑ Î∞∞Ïö∞Í≥† Ïã∂Ïùå", value: { learning: 3 } },
                    { text: "ÌïÑÏöîÌïòÎã§Î©¥ ÍµêÏú°ÏùÑ Î∞õÏùÑ ÏùòÌñ•Ïù¥ ÏûàÏùå", value: { learning: 2 } },
                    { text: "Í∞ÑÎã®Ìïú ÍµêÏú° Ï†ïÎèÑÎäî Í∞ÄÎä•", value: { learning: 1 } },
                    { text: "Í∏∞Ï°¥ ÏßÄÏãùÏúºÎ°ú Î∞îÎ°ú ÏùºÌïòÍ≥† Ïã∂Ïùå", value: { learning: 0 } }
                ]
            },
            {
                text: "ÏÑ†Ìò∏ÌïòÎäî Í∑ºÎ¨¥ ÏãúÍ∞ÑÎåÄÏôÄ ÌòïÌÉúÎäî?",
                options: [
                    { text: "Ï†ïÍ∑ú Í∑ºÎ¨¥ ÏãúÍ∞Ñ (Ïò§Ï†Ñ 9Ïãú ~ Ïò§ÌõÑ 6Ïãú)", value: { regular: 3 } },
                    { text: "ÍµêÎåÄ Í∑ºÎ¨¥ÎèÑ Í¥úÏ∞ÆÏùå", value: { shift: 3 } },
                    { text: "Ïú†Ïó∞Ìïú Í∑ºÎ¨¥ ÏãúÍ∞ÑÏùÑ ÏÑ†Ìò∏", value: { flexible: 3 } },
                    { text: "ÌååÌä∏ÌÉÄÏûÑ Í∑ºÎ¨¥Î•º ÏÑ†Ìò∏", value: { parttime: 3 } }
                ]
            },
            {
                text: "ÏßÅÏóÖÏóêÏÑú Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤ÉÏùÄ?",
                options: [
                    { text: "ÏïàÏ†ïÏ†ÅÏù∏ ÏÜåÎìùÍ≥º Í≥†Ïö© Î≥¥Ïû•", value: { stability: 3 } },
                    { text: "Ï†ÑÎ¨∏ÏÑ± Ìñ•ÏÉÅÍ≥º Í≤ΩÎ†• Í∞úÎ∞ú", value: { growth: 3 } },
                    { text: "ÏÇ¨ÌöåÏóê ÎèÑÏõÄÏù¥ ÎêòÎäî Î≥¥ÎûåÏûàÎäî Ïùº", value: { social_value: 3 } },
                    { text: "ÏõåÎùºÎ∞∏Í≥º Ïä§Ìä∏Î†àÏä§ ÏóÜÎäî ÌôòÍ≤Ω", value: { balance: 3 } }
                ]
            },
            {
                text: "ÏóÖÎ¨¥Ïùò Î∞òÎ≥µÏÑ±Ïóê ÎåÄÌïú ÏÑ†Ìò∏ÎèÑÎäî?",
                options: [
                    { text: "Îß§Ïùº Îã§ÏñëÌïòÍ≥† ÏÉàÎ°úÏö¥ ÏóÖÎ¨¥Î•º ÌïòÍ≥† Ïã∂Ïùå", value: { variety: 3, routine: 0 } },
                    { text: "Ïñ¥Îäê Ï†ïÎèÑ Î≥ÄÌôîÍ∞Ä ÏûàÎäî ÏóÖÎ¨¥Î•º ÏÑ†Ìò∏", value: { variety: 2, routine: 1 } },
                    { text: "Í∑úÏπôÏ†ÅÏù¥Í≥† ÏòàÏ∏° Í∞ÄÎä•Ìïú ÏóÖÎ¨¥Î•º ÏÑ†Ìò∏", value: { variety: 0, routine: 3 } },
                    { text: "Î∞òÎ≥µÏ†ÅÏù¥ÏßÄÎßå ÏàôÎ†®ÎèÑÎ•º ÎÜíÏùº Ïàò ÏûàÎäî ÏóÖÎ¨¥", value: { variety: 1, routine: 2, skill_focus: 3 } }
                ]
            },
            {
                text: "Í≥ºÍ±∞ Í≤ΩÎ†•Ïù¥ÎÇò Í¥ÄÏã¨ Î∂ÑÏïºÎäî?",
                options: [
                    { text: "ÏÇ¨Î¨¥ÏßÅÏù¥ÎÇò Í¥ÄÎ¶¨ÏßÅ Í≤ΩÌóòÏù¥ ÏûàÏùå", value: { office: 3 } },
                    { text: "Í∏∞Ïà†ÏßÅÏù¥ÎÇò ÏÉùÏÇ∞ÏßÅ Í≤ΩÌóòÏù¥ ÏûàÏùå", value: { technical_exp: 3 } },
                    { text: "ÏÑúÎπÑÏä§ÏóÖÏù¥ÎÇò ÏöîÎ¶¨ Í≤ΩÌóòÏù¥ ÏûàÏùå", value: { service: 3 } },
                    { text: "ÌäπÎ≥ÑÌïú Í≤ΩÎ†• ÏóÜÏù¥ ÏÉàÎ°úÏö¥ ÎèÑÏ†ÑÏùÑ ÏõêÌï®", value: { newbie: 3 } }
                ]
            }
        ];

        // ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Ìï®ÏàòÎì§
        function showCertLocationScreen() {
            document.getElementById('certStartScreen').style.display = 'none';
            document.getElementById('certLocationScreen').style.display = 'block';
            document.getElementById('certLocationInput').focus();
        }

        function backToCertStart() {
            document.getElementById('certLocationScreen').style.display = 'none';
            document.getElementById('certStartScreen').style.display = 'block';
            document.getElementById('certLocationInput').value = '';
            checkCertLocationInput();
        }

        function checkCertLocationInput() {
            const input = document.getElementById('certLocationInput');
            const btn = document.getElementById('certLocationBtn');
            const value = input.value.trim();
            
            if (value.length > 0) {
                btn.disabled = false;
            } else {
                btn.disabled = true;
            }
        }

        function handleCertLocationKeypress(event) {
            if (event.key === 'Enter') {
                const btn = document.getElementById('certLocationBtn');
                if (!btn.disabled) {
                    submitCertLocation();
                }
            }
        }

        function submitCertLocation() {
            const input = document.getElementById('certLocationInput');
            const location = input.value.trim();
            
            if (location.length === 0) {
                alert('ÏßÄÏó≠Íµ¨Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.');
                input.focus();
                return;
            }
            
            window.certUserLocation = location;
            startCertTest();
        }

        function startCertTest() {
            document.getElementById('certLocationScreen').style.display = 'none';
            document.getElementById('certQuestionScreen').style.display = 'block';
            showCertQuestion();
        }

        function showCertQuestion() {
            const question = certQuestions[window.certCurrentQuestion];
            document.getElementById('certQuestionNumber').textContent = `ÏßàÎ¨∏ ${window.certCurrentQuestion + 1}/10`;
            document.getElementById('certQuestionText').textContent = question.text;
            
            const optionsContainer = document.getElementById('certOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    <span class="option-text">${option.text}</span>
                `;
                optionDiv.onclick = () => selectCertOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            updateCertProgress();
            updateCertNavigation();
            window.certSelectedOption = null;
        }

        function selectCertOption(index) {
            window.certSelectedOption = index;
            
            document.querySelectorAll('#certOptions .option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
            
            setTimeout(() => {
                nextCertQuestion();
            }, 300);
        }

        function nextCertQuestion() {
            if (window.certSelectedOption === null) return;
            
            window.certAnswers[window.certCurrentQuestion] = certQuestions[window.certCurrentQuestion].options[window.certSelectedOption].value;
            window.certSelectedAnswers[window.certCurrentQuestion] = window.certSelectedOption + 1; // 1Î∂ÄÌÑ∞ ÏãúÏûëÌïòÎäî Î≤àÌò∏Î°ú Ï†ÄÏû•
            
            if (window.certCurrentQuestion < certQuestions.length - 1) {
                window.certCurrentQuestion++;
                showCertQuestion();
            } else {
                showCertResults();
            }
        }

        function prevCertQuestion() {
            if (window.certCurrentQuestion > 0) {
                window.certCurrentQuestion--;
                showCertQuestion();
            }
        }

        function updateCertProgress() {
            const progress = ((window.certCurrentQuestion + 1) / certQuestions.length) * 100;
            document.getElementById('certProgressFill').style.width = progress + '%';
        }

        function updateCertNavigation() {
            document.getElementById('certPrevBtn').disabled = window.certCurrentQuestion === 0;
        }

        function calculateCertScores() {
            const scores = {};
            
            Object.keys(certJobCategories).forEach(job => {
                scores[job] = 0;
                const jobInfo = certJobCategories[job];
                
                window.certAnswers.forEach(answer => {
                    // ÌôòÍ≤Ω Îß§Ïπ≠
                    if (answer.indoor !== undefined) {
                        if (jobInfo.environment === "indoor" && answer.indoor >= 2) scores[job] += 4;
                        else if (jobInfo.environment === "mixed" && answer.indoor >= 1) scores[job] += 2;
                        else if (jobInfo.environment === "outdoor" && answer.indoor <= 1) scores[job] += 2;
                    }
                    
                    if (answer.outdoor !== undefined) {
                        if (jobInfo.environment === "outdoor" && answer.outdoor >= 2) scores[job] += 4;
                        else if (jobInfo.environment === "mixed" && answer.outdoor >= 1) scores[job] += 2;
                    }
                    
                    // Ïã†Ï≤¥ ÌôúÎèô Îß§Ïπ≠
                    if (answer.physical !== undefined) {
                        if (jobInfo.physical === "high" && answer.physical >= 2) scores[job] += 3;
                        else if (jobInfo.physical === "medium" && answer.physical >= 1 && answer.physical <= 2) scores[job] += 3;
                        else if (jobInfo.physical === "low" && answer.physical <= 1) scores[job] += 3;
                    }
                    
                    // Í∏∞Ïà† ÏàòÏ§Ä Îß§Ïπ≠
                    if (answer.technical !== undefined) {
                        if (jobInfo.technical === "high" && answer.technical >= 2) scores[job] += 3;
                        else if (jobInfo.technical === "medium" && answer.technical >= 1 && answer.technical <= 2) scores[job] += 3;
                        else if (jobInfo.technical === "low" && answer.technical <= 1) scores[job] += 3;
                    }
                    
                    // Î∂ÑÏïºÎ≥Ñ Í¥ÄÏã¨ÏÇ¨ Îß§Ïπ≠
                    if (answer.construction && jobInfo.category === "Í±¥ÏÑ§Í∏∞Í≥Ñ") scores[job] += 5;
                    if (answer.machine && jobInfo.category === "Í±¥ÏÑ§Í∏∞Í≥Ñ") scores[job] += 5;
                    if (answer.cooking && jobInfo.category === "Ï°∞Î¶¨") scores[job] += 5;
                    if (answer.food && jobInfo.category === "Ï°∞Î¶¨") scores[job] += 5;
                    if (answer.medical && jobInfo.category === "ÏùòÎ£å") scores[job] += 5;
                    if (answer.care && jobInfo.category === "ÎèåÎ¥Ñ") scores[job] += 5;
                    if (answer.safety && (jobInfo.category === "ÏïàÏ†ÑÍ¥ÄÎ¶¨")) scores[job] += 5;
                    if (answer.environment && (jobInfo.category === "ÌôòÍ≤ΩÍ¥ÄÎ¶¨")) scores[job] += 5;
                    
                    // ÏÇ¨ÌöåÏÑ± Îß§Ïπ≠
                    if (answer.social !== undefined) {
                        if ((jobInfo.category === "ÏùòÎ£å" || jobInfo.category === "ÎèåÎ¥Ñ") && answer.social >= 2) scores[job] += 2;
                        else if (jobInfo.category === "ÏÇ¨Î¨¥" && answer.social >= 1) scores[job] += 2;
                        else if ((jobInfo.category === "Í±¥ÏÑ§Í∏∞Í≥Ñ" || jobInfo.category === "Í±¥ÏÑ§Í∏∞Ïà†") && answer.social <= 1) scores[job] += 2;
                    }
                    
                    // ÌïôÏäµ ÏùòÌñ•Í≥º Í∏∞Ïà† ÏàòÏ§Ä Îß§Ïπ≠
                    if (answer.learning !== undefined) {
                        if (jobInfo.technical === "high" && answer.learning >= 2) scores[job] += 2;
                        else if (jobInfo.technical === "low" && answer.learning <= 1) scores[job] += 2;
                    }
                    
                    // ÏóÖÎ¨¥ Î∞òÎ≥µÏÑ± ÏÑ†Ìò∏ÎèÑ
                    if (answer.variety >= 2 && (jobInfo.category === "ÏùòÎ£å" || jobInfo.category === "ÎèåÎ¥Ñ" || jobInfo.category === "ÏïàÏ†ÑÍ¥ÄÎ¶¨" || jobInfo.category === "ÌôòÍ≤ΩÍ¥ÄÎ¶¨")) scores[job] += 3;
                    if (answer.routine >= 2 && (jobInfo.category === "ÏÇ¨Î¨¥")) scores[job] += 3;
                    if (answer.skill_focus >= 2 && (jobInfo.category === "Í±¥ÏÑ§Í∏∞Í≥Ñ" || jobInfo.category === "Ï°∞Î¶¨" || jobInfo.category === "Í±¥ÏÑ§Í∏∞Ïà†")) scores[job] += 3;
                    
                    // Í≤ΩÎ†• Îß§Ïπ≠
                    if (answer.office && jobInfo.category === "ÏÇ¨Î¨¥") scores[job] += 3;
                    if (answer.technical_exp && (jobInfo.category === "Í±¥ÏÑ§Í∏∞Ïà†" || jobInfo.category === "ÏïàÏ†ÑÍ¥ÄÎ¶¨" || jobInfo.category === "Ï†ÑÍ∏∞Í∏∞Í≥Ñ")) scores[job] += 3;
                    if (answer.service && jobInfo.category === "Ï°∞Î¶¨") scores[job] += 3;
                    if (answer.newbie && jobInfo.technical === "low") scores[job] += 2;
                    
                    // ÏïàÏ†ïÏÑ± Ï∂îÍµ¨
                    if (answer.stability >= 2 && (jobInfo.category === "ÏùòÎ£å" || jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "Î≥¥Ïïà")) scores[job] += 2;
                    
                    // ÏÇ¨ÌöåÏ†Å Í∞ÄÏπò
                    if (answer.social_value >= 2 && (jobInfo.category === "ÏùòÎ£å" || jobInfo.category === "ÎèåÎ¥Ñ" || jobInfo.category === "ÌôòÍ≤ΩÍ¥ÄÎ¶¨" || jobInfo.category === "ÏïàÏ†ÑÍ¥ÄÎ¶¨")) scores[job] += 2;
                });
            });
            
            const sortedJobs = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3)
                .map(([job, score], index) => {
                    const baseRate = index === 0 ? 88 : index === 1 ? 78 : 68;
                    const bonus = Math.min(12, Math.floor(score / 3));
                    return { 
                        job, 
                        score, 
                        matchRate: baseRate + bonus
                    };
                });
            
            return sortedJobs;
        }

        function showCertResults() {
            document.getElementById('certQuestionScreen').style.display = 'none';
            document.getElementById('certResultScreen').style.display = 'block';
            
            const recommendedJobs = calculateCertScores();
            const jobsContainer = document.getElementById('certRecommendedJobs');
            jobsContainer.innerHTML = '';
            
            recommendedJobs.forEach((result, index) => {
                const jobInfo = certJobCategories[result.job];
                const jobDiv = document.createElement('div');
                jobDiv.className = 'job-item';
                jobDiv.onclick = () => showCertJobDetail(result.job);
                jobDiv.innerHTML = `
                    <div>
                        <span class="job-rank" style="background: #28a745;">${index + 1}</span>
                        <span class="job-name">${result.job}</span>
                        <span class="job-match" style="color: #28a745;">${result.matchRate}% Ï†ÅÌï©</span>
                    </div>
                    <div class="job-description">${jobInfo.description}</div>
                    <div class="cert-required">ÌïÑÏöî ÏûêÍ≤©Ï¶ù: ${jobInfo.cert}</div>
                `;
                jobsContainer.appendChild(jobDiv);
            });
            
            // SupabaseÏóê ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Í≤∞Í≥º Ï†ÄÏû•
            saveCertResultsToSupabase(recommendedJobs);
        }

        // SupabaseÏóê ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Í≤∞Í≥º Ï†ÄÏû•ÌïòÎäî Ìï®Ïàò
        async function saveCertResultsToSupabase(recommendedJobs) {
            // SupabaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Ï†ÄÏû•ÌïòÏßÄ ÏïäÏùå
            if (!supabase) {
                console.log('SupabaseÍ∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïÑ ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Í≤∞Í≥ºÎ•º Ï†ÄÏû•ÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
                return;
            }
            
            try {
                // IP Ï£ºÏÜå Í∞ÄÏ†∏Ïò§Í∏∞ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
                let ipAddress = null;
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    ipAddress = ipData.ip;
                } catch (ipError) {
                    console.log('IP Ï£ºÏÜåÎ•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§:', ipError);
                }
                
                // ÏÑ∏ÏÖò ID Í∞ÄÏ†∏Ïò§Í∏∞
                const sessionId = getOrCreateSessionId();
                
                // ÏÑ†ÌÉùÌïú ÎãµÎ≥ÄÎì§ÏùÑ Î¨∏ÏûêÏó¥Î°ú Î≥ÄÌôò (Ïòà: "1,2,4,2,1,2,3,4,1,1")
                const answersString = window.certSelectedAnswers.join(',');
                
                const { data, error } = await supabase
                    .from('senior_cert_test_results')
                    .insert([
                        {
                            session_id: sessionId,
                            job_1: recommendedJobs[0].job,
                            job_1_match_rate: recommendedJobs[0].matchRate,
                            job_1_cert: certJobCategories[recommendedJobs[0].job].cert,
                            job_2: recommendedJobs[1].job,
                            job_2_match_rate: recommendedJobs[1].matchRate,
                            job_2_cert: certJobCategories[recommendedJobs[1].job].cert,
                            job_3: recommendedJobs[2].job,
                            job_3_match_rate: recommendedJobs[2].matchRate,
                            job_3_cert: certJobCategories[recommendedJobs[2].job].cert,
                            answers: answersString,
                            location_city: window.certUserLocation,  // ÏßÄÏó≠Íµ¨ Ï†ïÎ≥¥ Ï∂îÍ∞Ä
                            user_agent: navigator.userAgent,
                            ip_address: ipAddress,
                            test_type: 'certification'
                        }
                    ]);
                
                if (error) {
                    console.error('ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Í≤∞Í≥º Ï†ÄÏû• Ï§ë Ïò§Î•ò:', error);
                } else {
                    console.log('ÏûêÍ≤©Ï¶ù Í≤ÄÏÇ¨ Í≤∞Í≥ºÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
                    console.log('ÏÇ¨Ïö©Ïûê ID:', sessionId);
                    console.log('ÏÇ¨Ïö©Ïûê ÏßÄÏó≠:', window.certUserLocation);
                    console.log('ÏÑ†ÌÉùÌïú ÎãµÎ≥Ä:', answersString);
                    console.log('Ï∂îÏ≤ú ÏûêÍ≤©Ï¶ù:', recommendedJobs.map(job => certJobCategories[job.job].cert));
                }
            } catch (err) {
                console.error('Supabase Ïó∞Í≤∞ Ïò§Î•ò:', err);
            }
        }

        function showCertJobDetail(job) {
            const jobInfo = certJobCategories[job];
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 40px;
                border-radius: 20px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `;
            
            modalContent.innerHTML = `
                <h2 style="color: #333; margin-bottom: 10px;">${job}</h2>
                <div style="background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(32, 201, 151, 0.1) 100%);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 20px;">
                    <div style="color: #28a745; font-size: 1.2em; font-weight: 600; margin-bottom: 10px;">
                        ÌïÑÏöî ÏûêÍ≤©Ï¶ù: ${jobInfo.cert}
                    </div>
                    <div style="color: #666; line-height: 1.6;">
                        ${jobInfo.description}
                    </div>
                </div>
                <p style="color: #666; margin-bottom: 30px;">
                    ÎÇ¥ÏùºÎ∞∞ÏõÄÏπ¥ÎìúÎ•º ÌôúÏö©ÌïòÏó¨<br>
                    <strong style="color: #28a745;">${jobInfo.cert}</strong> ÏûêÍ≤©Ï¶ùÏùÑ Ï∑®ÎìùÌïòÍ≥†<br>
                    Í¥ÄÎ†® ÏßÅÏóÖÏóê ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî!
                </p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button onclick="
                        window.open('https://www.work24.go.kr/wk/a/b/1200/retriveDtlEmpSrchList.do?srcKeyword=${encodeURIComponent(job)}&region=11000', '_blank');
                        document.body.removeChild(this.parentElement.parentElement.parentElement);
                    " 
                            style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); 
                                   color: white; 
                                   border: none; 
                                   padding: 15px 25px; 
                                   border-radius: 50px; 
                                   cursor: pointer;
                                   font-size: 1em;
                                   margin-bottom: 10px;">
                        ÏùºÏûêÎ¶¨ Ï∞æÏïÑÎ≥¥Í∏∞
                    </button>
                    <button onclick="
                        window.open('https://play.google.com/store/apps/details?id=chatGPT_for_senior.myapplication&hl=ko', '_blank');
                        document.body.removeChild(this.parentElement.parentElement.parentElement);
                    " 
                            style="background: #20c997; 
                                   color: white; 
                                   border: none; 
                                   padding: 15px 25px; 
                                   border-radius: 50px; 
                                   cursor: pointer;
                                   font-size: 1em;
                                   margin-bottom: 10px;">
                        Ïò§ÎπÑÏÑúÏóêÏÑú Îçî ÏûêÏÑ∏Ìûà ÏïåÏïÑÎ≥¥Í∏∞
                    </button>
                </div>
                <button onclick="document.body.removeChild(this.parentElement.parentElement);" 
                        style="margin-top: 15px;
                               background: #e9ecef; 
                               color: #495057; 
                               border: none; 
                               padding: 12px 25px; 
                               border-radius: 50px; 
                               cursor: pointer;
                               font-size: 1em;">
                    Îã´Í∏∞
                </button>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        function restartCertTest() {
            window.certCurrentQuestion = 0;
            window.certAnswers = [];
            window.certSelectedAnswers = []; // ÏÑ†ÌÉùÌïú ÎãµÎ≥Ä Ï¥àÍ∏∞Ìôî Ï∂îÍ∞Ä
            window.certSelectedOption = null;
            window.certUserLocation = '';
            
            document.getElementById('certResultScreen').style.display = 'none';
            document.getElementById('certQuestionScreen').style.display = 'none';
            document.getElementById('certLocationScreen').style.display = 'none';
            document.getElementById('certStartScreen').style.display = 'block';
            document.getElementById('certProgressFill').style.width = '0%';
            
            document.getElementById('certLocationInput').value = '';
            checkCertLocationInput();
        }

        function backToJobTest() {
            // Î©îÎâ¥ active ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            updateMenuActive(null);
            
            // ÏûêÍ≤©Ï¶ù Í¥ÄÎ†® Ïä§ÌÉÄÏùº Ï†úÍ±∞
            const certStyles = document.getElementById('cert-styles');
            if (certStyles) {
                certStyles.remove();
            }
            
            // Î©îÏù∏ ÎåÄÏãúÎ≥¥ÎìúÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
            showMainDashboard();
        }

        // Supabase Ï¥àÍ∏∞Ìôî - Ïã§Ï†ú ÌîÑÎ°úÏ†ùÌä∏ URLÍ≥º ANON KEYÎ°ú ÍµêÏ≤¥ÌïòÏÑ∏Ïöî
        const SUPABASE_URL = 'YOUR_SUPABASE_PROJECT_URL';
        const SUPABASE_ANON_KEY = 'YOUR_SUPABASE_ANON_KEY';
        
        // Supabase ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÉùÏÑ± (Ï°∞Í±¥ Î≥ÄÍ≤Ω)
        let supabase = null;
        if (SUPABASE_URL.includes('supabase.co') && SUPABASE_ANON_KEY.length > 50) {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        }
        
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let todayVisitorCount = 0;
        let totalVisitorCount = 0;
        let selectedAnswers = [];
        let userLocation = '';
        
        // Ïò§Îäò ÎÇ†ÏßúÎ•º YYYY-MM-DD ÌòïÏãùÏúºÎ°ú Î∞òÌôò
        function getTodayDate() {
            const today = new Date();
            return today.getFullYear() + '-' + 
                   String(today.getMonth() + 1).padStart(2, '0') + '-' + 
                   String(today.getDate()).padStart(2, '0');
        }

        // Î∞©Î¨∏Ïûê Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî Î∞è ÏóÖÎç∞Ïù¥Ìä∏
        async function initAndUpdateVisitorCounter() {
            const today = getTodayDate();
            
            console.log('Î∞©Î¨∏Ïûê Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî ÏãúÏûë...');
            
            // Supabase Ïó∞Í≤∞Ïù¥ ÎêòÏñ¥ ÏûàÎäî Í≤ΩÏö∞
            if (supabase) {
                try {
                    console.log('Supabase Ïó∞Í≤∞ ÌôïÏù∏Îê®');
                    
                    // Î®ºÏ†Ä Î∞©Î¨∏ Í∏∞Î°ù Ï∂îÍ∞Ä (Îß§Î≤à Ï∂îÍ∞ÄÎê®)
                    await addVisitRecord();
                    
                    // Ïò§ÎäòÏùò Î∞©Î¨∏Ïûê Ïàò Ï°∞Ìöå
                    const { data: todayData, error: todayError } = await supabase
                        .from('senior_job_visits')
                        .select('*', { count: 'exact' })
                        .gte('visit_date', today + ' 00:00:00')
                        .lt('visit_date', today + ' 23:59:59');
                    
                    if (!todayError && todayData) {
                        todayVisitorCount = todayData.length || 1;
                        console.log('Ïò§ÎäòÏùò Î∞©Î¨∏Ïûê:', todayVisitorCount);
                    } else {
                        console.error('Ïò§Îäò Î∞©Î¨∏Ïûê Ï°∞Ìöå Ïò§Î•ò:', todayError);
                        todayVisitorCount = Math.floor(Math.random() * 30) + 15;
                    }
                    
                    // Ï¥ù Î∞©Î¨∏Ïûê Ïàò Ï°∞Ìöå
                    const { data: totalData, error: totalError } = await supabase
                        .from('senior_job_visits')
                        .select('*', { count: 'exact' });
                    
                    if (!totalError && totalData) {
                        totalVisitorCount = totalData.length || 1;
                        console.log('Ï¥ù Î∞©Î¨∏Ïûê:', totalVisitorCount);
                    } else {
                        console.error('Ï¥ù Î∞©Î¨∏Ïûê Ï°∞Ìöå Ïò§Î•ò:', totalError);
                        totalVisitorCount = Math.floor(Math.random() * 200) + 100;
                    }
                    
                } catch (error) {
                    console.error('Supabase Î∞©Î¨∏Ïûê Ïπ¥Ïö¥ÌÑ∞ Ïò§Î•ò:', error);
                    // Ïò§Î•ò Ïãú Í∏∞Î≥∏Í∞í ÏÇ¨Ïö©
                    setFallbackCounts();
                }
            } else {
                console.log('Supabase ÎØ∏Ïó∞Í≤∞ - Î°úÏª¨ Ïπ¥Ïö¥ÌÑ∞ ÏÇ¨Ïö©');
                // SupabaseÍ∞Ä ÏóÜÎäî Í≤ΩÏö∞ Î°úÏª¨ Ïπ¥Ïö¥ÌÑ∞ ÏÇ¨Ïö©
                setFallbackCounts();
            }
            
            // ÏµúÏÜåÍ∞í Î≥¥Ïû•
            if (todayVisitorCount < 1) todayVisitorCount = Math.floor(Math.random() * 20) + 5;
            if (totalVisitorCount < 1) totalVisitorCount = Math.floor(Math.random() * 150) + 50;
            
            console.log('ÏµúÏ¢Ö Ïπ¥Ïö¥ÌÑ∞ Í∞í:', { todayVisitorCount, totalVisitorCount });
            
            // Ïπ¥Ïö¥ÌÑ∞ Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë
            animateCounters();
        }

        // Î∞©Î¨∏ Í∏∞Î°ù Ï∂îÍ∞Ä
        async function addVisitRecord() {
            if (!supabase) return;
            
            try {
                // IP Ï£ºÏÜå Í∞ÄÏ†∏Ïò§Í∏∞
                let ipAddress = null;
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    ipAddress = ipData.ip;
                } catch (ipError) {
                    console.log('IP Ï£ºÏÜåÎ•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§:', ipError);
                    ipAddress = 'unknown';
                }
                
                // Î∞©Î¨∏ Í∏∞Î°ù Ï∂îÍ∞Ä
                const { data, error } = await supabase
                    .from('senior_job_visits')
                    .insert([
                        {
                            ip_address: ipAddress,
                            user_agent: navigator.userAgent,
                            visit_date: new Date().toISOString(),
                            referrer: document.referrer || null
                        }
                    ]);
                
                if (error) {
                    console.error('Î∞©Î¨∏ Í∏∞Î°ù Ï∂îÍ∞Ä Ïò§Î•ò:', error);
                } else {
                    console.log('Î∞©Î¨∏ Í∏∞Î°ùÏù¥ Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.');
                }
            } catch (err) {
                console.error('Î∞©Î¨∏ Í∏∞Î°ù Ï∂îÍ∞Ä Ï§ë Ïò§Î•ò:', err);
            }
        }

        // Î°úÏª¨ Ïπ¥Ïö¥ÌÑ∞ ÏÑ§Ï†ï (Supabase ÎØ∏ÏÇ¨Ïö©Ïãú)
        function setFallbackCounts() {
            const today = getTodayDate();
            
            try {
                // Î°úÏª¨ Ïä§ÌÜ†Î¶¨ÏßÄÏóêÏÑú Ïπ¥Ïö¥ÌÑ∞ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (localStorage Ïö∞ÏÑ† ÏãúÎèÑ)
                let lastVisitDate, storedTodayCount, storedTotalCount;
                
                try {
                    // localStorage ÏãúÎèÑ
                    lastVisitDate = localStorage.getItem('lastVisitDate');
                    storedTodayCount = parseInt(localStorage.getItem('todayVisitorCount') || '0');
                    storedTotalCount = parseInt(localStorage.getItem('totalVisitorCount') || '0');
                } catch (e) {
                    // localStorage Ïã§Ìå® Ïãú sessionStorage ÏÇ¨Ïö©
                    lastVisitDate = sessionStorage.getItem('lastVisitDate');
                    storedTodayCount = parseInt(sessionStorage.getItem('todayVisitorCount') || '0');
                    storedTotalCount = parseInt(sessionStorage.getItem('totalVisitorCount') || '0');
                }
                
                // ÎÇ†ÏßúÍ∞Ä Î∞îÎÄåÏóàÏúºÎ©¥ Ïò§Îäò Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
                if (lastVisitDate !== today) {
                    todayVisitorCount = 1;
                    storedTotalCount = storedTotalCount + 1; // Ï¥ù Î∞©Î¨∏ÏûêÎäî Í≥ÑÏÜç Ï¶ùÍ∞Ä
                    totalVisitorCount = storedTotalCount;
                } else {
                    todayVisitorCount = storedTodayCount + 1;
                    totalVisitorCount = storedTotalCount + 1;
                }
                
                // Í∞í Ï†ÄÏû• (localStorage Ïö∞ÏÑ†, Ïã§Ìå®Ïãú sessionStorage)
                try {
                    localStorage.setItem('todayVisitorCount', todayVisitorCount.toString());
                    localStorage.setItem('totalVisitorCount', totalVisitorCount.toString());
                    localStorage.setItem('lastVisitDate', today);
                } catch (e) {
                    sessionStorage.setItem('todayVisitorCount', todayVisitorCount.toString());
                    sessionStorage.setItem('totalVisitorCount', totalVisitorCount.toString());
                    sessionStorage.setItem('lastVisitDate', today);
                }
                
                console.log('Î°úÏª¨ Ïπ¥Ïö¥ÌÑ∞ ÏÑ§Ï†ï:', { todayVisitorCount, totalVisitorCount, today });
                
            } catch (error) {
                console.error('Î°úÏª¨ Ïπ¥Ïö¥ÌÑ∞ ÏÑ§Ï†ï Ïò§Î•ò:', error);
                // Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï
                todayVisitorCount = Math.floor(Math.random() * 50) + 10; // 10-60 ÎûúÎç§
                totalVisitorCount = Math.floor(Math.random() * 500) + 100; // 100-600 ÎûúÎç§
            }
        }

        // Ïπ¥Ïö¥ÌÑ∞ Ïï†ÎãàÎ©îÏù¥ÏÖò
        function animateCounters() {
            animateCounter('todayVisitorCount', todayVisitorCount);
            animateCounter('totalVisitorCount', totalVisitorCount);
        }

        // Í∞úÎ≥Ñ Ïπ¥Ïö¥ÌÑ∞ Ïï†ÎãàÎ©îÏù¥ÏÖò
        function animateCounter(elementId, targetCount) {
            const element = document.getElementById(elementId);
            if (!element) {
                console.error('Ïπ¥Ïö¥ÌÑ∞ ÏóòÎ¶¨Î®ºÌä∏Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§:', elementId);
                return;
            }
            
            let currentCount = 0;
            const increment = Math.max(1, Math.ceil(targetCount / 20));
            
            console.log(`${elementId} Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë: Î™©ÌëúÍ∞í ${targetCount}, Ï¶ùÍ∞ÄÎüâ ${increment}`);
            
            const timer = setInterval(() => {
                currentCount += increment;
                if (currentCount >= targetCount) {
                    currentCount = targetCount;
                    clearInterval(timer);
                }
                element.textContent = currentCount.toLocaleString();
            }, 80);
        }

        // ÏÑ∏ÏÖò ID ÏÉùÏÑ± ÎòêÎäî Í∞ÄÏ†∏Ïò§Í∏∞
        function getOrCreateSessionId() {
            // Claude.ai ÌôòÍ≤Ω Ï≤¥ÌÅ¨
            const isClaudeEnvironment = typeof window !== 'undefined' && 
                                       window.location && 
                                       window.location.hostname.includes('claude.ai');
            
            let sessionId;
            
            if (isClaudeEnvironment) {
                // Claude.ai ÌôòÍ≤ΩÏóêÏÑúÎäî sessionStorage ÏÇ¨Ïö© (localStorage ÎØ∏ÏßÄÏõê)
                sessionId = sessionStorage.getItem('seniorJobTestSessionId');
                if (!sessionId) {
                    sessionId = Date.now().toString(36) + '-' + Math.random().toString(36).substr(2, 9);
                    sessionStorage.setItem('seniorJobTestSessionId', sessionId);
                }
            } else {
                // Ïã§Ï†ú Ïö¥ÏòÅ ÌôòÍ≤ΩÏóêÏÑúÎäî localStorage ÏÇ¨Ïö© (ÏòÅÍµ¨ Ï†ÄÏû•)
                try {
                    sessionId = localStorage.getItem('seniorJobTestUserId');
                    if (!sessionId) {
                        // ÏÉà ÏÇ¨Ïö©Ïûê ID ÏÉùÏÑ± (ÌÉÄÏûÑÏä§ÌÉ¨ÌîÑ + ÎûúÎç§ Î¨∏ÏûêÏó¥)
                        sessionId = 'user-' + Date.now().toString(36) + '-' + Math.random().toString(36).substr(2, 9);
                        localStorage.setItem('seniorJobTestUserId', sessionId);
                        
                        // Ï≤òÏùå Î∞©Î¨∏ ÏãúÍ∞ÑÎèÑ Ï†ÄÏû•
                        localStorage.setItem('seniorJobTestFirstVisit', new Date().toISOString());
                    }
                    
                    // ÎßàÏßÄÎßâ Î∞©Î¨∏ ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏
                    localStorage.setItem('seniorJobTestLastVisit', new Date().toISOString());
                    
                    // Ï¥ù Î∞©Î¨∏ ÌöüÏàò Ï¶ùÍ∞Ä
                    const visitCount = parseInt(localStorage.getItem('seniorJobTestVisitCount') || '0') + 1;
                    localStorage.setItem('seniorJobTestVisitCount', visitCount.toString());
                    
                } catch (e) {
                    // localStorage Ï†ëÍ∑º Ïã§Ìå® Ïãú (Ïòà: ÏãúÌÅ¨Î¶ø Î™®Îìú) sessionStorage ÏÇ¨Ïö©
                    console.log('localStorageÎ•º ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§. sessionStorageÎ°ú ÎåÄÏ≤¥Ìï©ÎãàÎã§.');
                    sessionId = sessionStorage.getItem('seniorJobTestSessionId');
                    if (!sessionId) {
                        sessionId = 'temp-' + Date.now().toString(36) + '-' + Math.random().toString(36).substr(2, 9);
                        sessionStorage.setItem('seniorJobTestSessionId', sessionId);
                    }
                }
            }
            
            return sessionId;
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìúÏãú Î∞©Î¨∏Ïûê Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî
        window.addEventListener('DOMContentLoaded', function() {
            console.log('ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å');
            
            // Î©îÏù∏ ÎåÄÏãúÎ≥¥Îìú ÌëúÏãú
            showMainDashboard();
            
            // Î∞©Î¨∏Ïûê Ïπ¥Ïö¥ÌÑ∞ Ï¥àÍ∏∞Ìôî (ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏúºÎØÄÎ°ú Ï†úÍ±∞)
            // setTimeout(initAndUpdateVisitorCounter, 100);
        });

        // Î©îÎâ¥ active ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        function updateMenuActive(activeItem) {
            // Î™®Îì† Î©îÎâ¥ ÏïÑÏù¥ÌÖúÏóêÏÑú active ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // ÌäπÏ†ï Î©îÎâ¥ ÏïÑÏù¥ÌÖúÏóê active ÌÅ¥ÎûòÏä§ Ï∂îÍ∞Ä
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        // ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌôîÎ©¥ ÌëúÏãú
        function showLocationScreen() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('locationScreen').style.display = 'block';
            document.getElementById('locationInput').focus();
        }

        // ÏãúÏûë ÌôîÎ©¥ÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function backToStart() {
            document.getElementById('locationScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            // ÏûÖÎ†•Í∞í Ï¥àÍ∏∞Ìôî
            document.getElementById('locationInput').value = '';
            checkLocationInput();
        }

        // ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÌôïÏù∏
        function checkLocationInput() {
            const input = document.getElementById('locationInput');
            const btn = document.getElementById('locationBtn');
            const value = input.value.trim();
            
            if (value.length > 0) {
                btn.disabled = false;
            } else {
                btn.disabled = true;
            }
        }

        // ÏóîÌÑ∞ÌÇ§ Ï≤òÎ¶¨
        function handleLocationKeypress(event) {
            if (event.key === 'Enter') {
                const btn = document.getElementById('locationBtn');
                if (!btn.disabled) {
                    submitLocation();
                }
            }
        }

        // ÏßÄÏó≠Íµ¨ Ï†úÏ∂ú
        function submitLocation() {
            const input = document.getElementById('locationInput');
            const location = input.value.trim();
            
            if (location.length === 0) {
                alert('ÏßÄÏó≠Íµ¨Î•º ÏûÖÎ†•Ìï¥ Ï£ºÏÑ∏Ïöî.');
                input.focus();
                return;
            }
            
            userLocation = location;
            console.log('ÏÇ¨Ïö©Ïûê ÏßÄÏó≠:', userLocation);
            
            // ÏßÄÏó≠Íµ¨ ÏûÖÎ†• ÏôÑÎ£å ÌõÑ ÌÖåÏä§Ìä∏ ÏãúÏûë
            startTest();
        }

        // Îã®ÏàúÌôîÎêú ÏßÅÏóÖ Ïπ¥ÌÖåÍ≥†Î¶¨
        const jobCategories = {
            "ÎèåÎ¥Ñ¬∑Í∞ÑÎ≥ë Ï¢ÖÏÇ¨Ïûê": { 
                category: "ÎèåÎ¥Ñ", 
                physical: "high", 
                social: "high", 
                stress: "medium", 
                skill: "medium", 
                description: "Í∞ÑÎ≥ëÏù∏, ÏöîÏñëÎ≥¥Ìò∏ÏÇ¨ Îì± ÌôòÏûêÏôÄ ÎÖ∏Ïù∏ ÎèåÎ¥Ñ ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï©ÎãàÎã§.",
                keywords: ["ÏöîÏñë", "Í∞ÑÎ≥ëÏù∏", "ÏöîÏñëÎ≥¥Ìò∏ÏÇ¨", "ÎèåÎ¥Ñ"]
            },
            "ÏïÑÏù¥ÎèåÎ≥¥ÎØ∏": { 
                category: "ÎèåÎ¥Ñ", 
                physical: "medium", 
                social: "high", 
                stress: "medium", 
                skill: "low", 
                description: "Í∞ÄÏ†ïÏóêÏÑú ÏïÑÏù¥Îì§ÏùÑ ÎèåÎ≥¥Í≥† Ïú°ÏïÑÎ•º ÏßÄÏõêÌï©ÎãàÎã§.",
                keywords: ["ÎèÑÏö∞ÎØ∏", "ÏïÑÏù¥ÎèåÎ¥Ñ", "Ïú°ÏïÑ"]
            },
            "ÏãúÏÑ§¬∑ÏÑ§ÎπÑ Í¥ÄÎ¶¨Ïõê": { 
                category: "Í∏∞Ïà†", 
                physical: "medium", 
                social: "low", 
                stress: "medium", 
                skill: "high", 
                description: "Í±¥Î¨º ÏÑ§ÎπÑ, ÏãúÏÑ§, Ï†ÑÍ∏∞ Îì±Ïùò Ïú†ÏßÄÎ≥¥ÏàòÏôÄ Í¥ÄÎ¶¨Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÏÑ§ÎπÑ", "ÏãúÏÑ§", "Ï†ÑÍ∏∞"]
            },
            "ÍµêÏú° Ï¢ÖÏÇ¨Ïûê": { 
                category: "ÍµêÏú°", 
                physical: "low", 
                social: "high", 
                stress: "medium", 
                skill: "high", 
                description: "Î∞©Í≥ºÌõÑ ÍµêÏÇ¨, ÏãúÎãàÏñ¥ Í∞ïÏÇ¨ Îì± ÍµêÏú° Î∂ÑÏïºÏóêÏÑú ÌôúÎèôÌï©ÎãàÎã§.",
                keywords: ["ÍµêÏÇ¨", "Í∞ïÏÇ¨", "ÍµêÏú°"]
            },
            "ÏÇ¨ÌöåÎ≥µÏßÄÏÇ¨": { 
                category: "Î≥µÏßÄ", 
                physical: "low", 
                social: "high", 
                stress: "high", 
                skill: "high", 
                description: "Î≥µÏßÄ ÎåÄÏÉÅÏûêÏùò ÏÉÅÎã¥Í≥º ÏßÄÏõê ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï©ÎãàÎã§.",
                keywords: ["ÏÇ¨ÌöåÎ≥µÏßÄÏÇ¨", "Î≥µÏßÄ"]
            },
            "ÌôòÍ≤ΩÎØ∏ÌôîÏõê": { 
                category: "ÏúÑÏÉù", 
                physical: "high", 
                social: "low", 
                stress: "low", 
                skill: "low", 
                description: "Í±¥Î¨ºÏù¥ÎÇò Í±∞Î¶¨Ïùò Ï≤≠ÏÜåÏôÄ ÌôòÍ≤Ω ÎØ∏ÌôîÎ•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÎØ∏Ìôî", "Ï≤≠ÏÜå", "ÌôòÍ≤Ω"]
            },
            "Í≤ΩÎπÑÏõê": { 
                category: "Î≥¥Ïïà", 
                physical: "low", 
                social: "medium", 
                stress: "low", 
                skill: "low", 
                description: "Í±¥Î¨ºÏù¥ÎÇò ÏãúÏÑ§Ïùò ÏïàÏ†ÑÏùÑ ÏßÄÌÇ§Í≥† Ï∂úÏûÖÏùÑ Í¥ÄÎ¶¨Ìï©ÎãàÎã§.",
                keywords: ["Í≤ΩÎπÑ", "Î≥¥Ïïà"]
            },
            "Ïö¥Ï†ÑÏõê": { 
                category: "Ïö¥ÏÜ°", 
                physical: "medium", 
                social: "medium", 
                stress: "medium", 
                skill: "medium", 
                description: "ÌÉùÏãú, Î≤ÑÏä§, Î∞∞ÏÜ° Îì± Ïö¥Ï†Ñ ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["Ïö¥Ï†Ñ", "ÌÉùÏãú", "Î≤ÑÏä§", "Î∞∞ÏÜ°"]
            },
            "ÏÑúÎπÑÏä§ÏßÅ Ï¢ÖÏÇ¨Ïûê": { 
                category: "ÏÑúÎπÑÏä§", 
                physical: "medium", 
                social: "high", 
                stress: "medium", 
                skill: "low", 
                description: "ÏùåÏãùÏ†ê, ÌåêÎß§Ï†ê Îì±ÏóêÏÑú Í≥†Í∞ù ÏÑúÎπÑÏä§Î•º Ï†úÍ≥µÌï©ÎãàÎã§.",
                keywords: ["ÏÑúÎπÑÏä§", "ÏÑúÎπô", "ÌåêÎß§"]
            },
            "ÏÇ¨Î¨¥ÏßÅÏõê": { 
                category: "ÏÇ¨Î¨¥", 
                physical: "low", 
                social: "medium", 
                stress: "medium", 
                skill: "medium", 
                description: "ÏùºÎ∞ò ÏÇ¨Î¨¥, ÌñâÏ†ï ÏßÄÏõê Îì±Ïùò ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÏÇ¨Î¨¥", "ÌñâÏ†ï", "ÏÇ¨Î¨¥Ïõê", "ÏÇ¨ÏÑú", "ÏïàÎÇ¥"]
            },
            "ÏïΩÍµ≠ ÏÇ¨Î¨¥Ïõê": { 
                category: "ÏùòÎ£åÏÇ¨Î¨¥", 
                physical: "low", 
                social: "high", 
                stress: "medium", 
                skill: "medium", 
                description: "ÏïΩÍµ≠ÏóêÏÑú Ï≤òÎ∞©Ï†Ñ Ï†ëÏàò, ÏïΩÌíà Í¥ÄÎ¶¨ Îì± ÏÇ¨Î¨¥ ÏóÖÎ¨¥Î•º Îã¥ÎãπÌï©ÎãàÎã§.",
                keywords: ["ÏïΩÍµ≠ÏÇ¨Î¨¥Ïõê", "ÏïΩÍµ≠", "ÏùòÎ£åÏÇ¨Î¨¥"]
            },
            "ÎèÑÎ≥¥ Î∞∞Îã¨Ïõê": { 
                category: "Î∞∞Îã¨", 
                physical: "high", 
                social: "low", 
                stress: "low", 
                skill: "low", 
                description: "ÎèÑÎ≥¥ÎÇò ÏûêÏ†ÑÍ±∞Î°ú Í∑ºÍ±∞Î¶¨ Î∞∞Îã¨ ÏóÖÎ¨¥Î•º ÏàòÌñâÌï©ÎãàÎã§.",
                keywords: ["ÎèÑÎ≥¥Î∞∞Îã¨Ïõê", "Î∞∞Îã¨", "Î∞∞ÏÜ°"]
            }
        };

        // ÏßàÎ¨∏ Îç∞Ïù¥ÌÑ∞
        const questions = [
            {
                text: "ÌïòÎ£® Ï§ë Í∞ÄÏû• ÌôúÎ†•Ïù¥ ÎÑòÏπòÎäî ÏãúÍ∞ÑÎåÄÎäî Ïñ∏Ï†úÏù∏Í∞ÄÏöî?",
                options: [
                    { text: "ÏïÑÏπ® ÏùºÏ∞ç (Ïò§Ï†Ñ 6-9Ïãú)", value: { physical: 2, morning: 3 } },
                    { text: "Ïò§Ï†Ñ Ï§ë (Ïò§Ï†Ñ 9-12Ïãú)", value: { physical: 1, morning: 2 } },
                    { text: "Ïò§ÌõÑ (Ïò§ÌõÑ 12-6Ïãú)", value: { physical: 1, morning: 1 } },
                    { text: "Ï†ÄÎÖÅ (Ïò§ÌõÑ 6Ïãú Ïù¥ÌõÑ)", value: { physical: 0, morning: 0 } }
                ]
            },
            {
                text: "ÏÇ¨ÎûåÎì§Í≥º Ìï®Íªò ÏùºÌïòÎäî Í≤ÉÏùÑ ÏñºÎßàÎÇò Ï¢ãÏïÑÌïòÏãúÎÇòÏöî?",
                options: [
                    { text: "Îß§Ïö∞ Ï¢ãÏïÑÌï® - Îäò ÏÇ¨ÎûåÎì§Í≥º Ìï®Íªò ÏûàÍ≥† Ïã∂Ïùå", value: { social: 3 } },
                    { text: "Ï¢ãÏïÑÌï® - Ï†ÅÎãπÌïú ÍµêÎ•òÎ•º ÏÑ†Ìò∏", value: { social: 2 } },
                    { text: "Î≥¥ÌÜµ - ÌòºÏûê ÏùºÌïòÎäî Í≤ÉÎèÑ Í¥úÏ∞ÆÏùå", value: { social: 1 } },
                    { text: "ÌòºÏûê ÏùºÌïòÎäî Í≤ÉÏùÑ ÏÑ†Ìò∏", value: { social: 0 } }
                ]
            },
            {
                text: "Ïú°Ï≤¥Ï†Å ÌôúÎèôÏóê ÎåÄÌïú ÏÑ†Ìò∏ÎèÑÎäî Ïñ¥Îñ†Ïã†Í∞ÄÏöî?",
                options: [
                    { text: "ÌôúÎ∞úÌïú Ïú°Ï≤¥ ÌôúÎèôÏùÑ ÏÑ†Ìò∏", value: { physical: 3 } },
                    { text: "Ï†ÅÎãπÌïú ÏõÄÏßÅÏûÑÏù¥ ÏûàÎäî ÏùºÏùÑ ÏÑ†Ìò∏", value: { physical: 2 } },
                    { text: "Í∞ÄÎ≤ºÏö¥ ÌôúÎèô Ï†ïÎèÑÎßå ÏÑ†Ìò∏", value: { physical: 1 } },
                    { text: "Ï£ºÎ°ú ÏïâÏïÑÏÑú ÌïòÎäî ÏùºÏùÑ ÏÑ†Ìò∏", value: { physical: 0 } }
                ]
            },
            {
                text: "Ïñ¥Îñ§ Î∂ÑÏïºÏóêÏÑú ÏùºÌïòÍ≥† Ïã∂ÏúºÏã†Í∞ÄÏöî?",
                options: [
                    { text: "ÎèåÎ¥Ñ/Î≥µÏßÄ Î∂ÑÏïº (ÏÇ¨ÎûåÏùÑ ÏßÅÏ†ë ÎèïÎäî Ïùº)", value: { care: 3, service: 2 } },
                    { text: "ÍµêÏú°/ÏßÄÎèÑ Î∂ÑÏïº (ÏßÄÏãùÍ≥º Í≤ΩÌóò Ï†ÑÎã¨)", value: { education: 3, social: 2 } },
                    { text: "Í∏∞Ïà†/Í¥ÄÎ¶¨ Î∂ÑÏïº (ÏãúÏÑ§Ïù¥ÎÇò Ïû•ÎπÑ Í¥ÄÎ¶¨)", value: { technical: 3, physical: 1 } },
                    { text: "ÏÑúÎπÑÏä§/ÏÇ¨Î¨¥ Î∂ÑÏïº (Í≥†Í∞ù ÏùëÎåÄ Î∞è ÌñâÏ†ï)", value: { service: 3, office: 2 } }
                ]
            },
            {
                text: "Í∑ºÎ¨¥ ÌôòÍ≤ΩÏúºÎ°ú ÏÑ†Ìò∏ÌïòÎäî Í≥≥ÏùÄ?",
                options: [
                    { text: "Ïã§ÎÇ¥ ÏÇ¨Î¨¥Ïã§Ïù¥ÎÇò ÏãúÏÑ§", value: { indoor: 3, physical: 0 } },
                    { text: "Ïã§ÎÇ¥Ïô∏Î•º Ïò§Í∞ÄÎ©∞ ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { indoor: 2, physical: 1 } },
                    { text: "Ï£ºÎ°ú ÏïºÏô∏ÏóêÏÑú ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { outdoor: 3, physical: 2 } },
                    { text: "Ïù¥ÎèôÌïòÎ©∞ ÏùºÌïòÎäî ÌôòÍ≤Ω", value: { mobile: 3, physical: 1 } }
                ]
            },
            {
                text: "ÏûêÍ≤©Ï¶ùÏù¥ÎÇò ÌäπÎ≥ÑÌïú Í∏∞Ïà† ÏäµÎìùÏóê ÎåÄÌïú ÏùòÌñ•ÏùÄ?",
                options: [
                    { text: "Ï†ÅÍ∑πÏ†ÅÏúºÎ°ú ÏÉàÎ°úÏö¥ ÏûêÍ≤©Ï¶ù Ï∑®Îìù Ìù¨Îßù", value: { learning: 3 } },
                    { text: "ÌïÑÏöîÌïòÎã§Î©¥ Í∞ÑÎã®Ìïú ÍµêÏú° Ïù¥Ïàò Í∞ÄÎä•", value: { learning: 2 } },
                    { text: "Í∏∞Ï°¥ Í≤ΩÌóòÏùÑ ÌôúÏö©ÌïòÍ≥† Ïã∂Ïùå", value: { learning: 1 } },
                    { text: "ÌäπÎ≥ÑÌïú ÍµêÏú° ÏóÜÏù¥ Î∞îÎ°ú ÏùºÌïòÍ≥† Ïã∂Ïùå", value: { learning: 0 } }
                ]
            },
            {
                text: "ÏÑ†Ìò∏ÌïòÎäî Í∑ºÎ¨¥ ÏãúÍ∞ÑÎåÄÎäî?",
                options: [
                    { text: "Ï†ïÍ∑ú Í∑ºÎ¨¥ ÏãúÍ∞Ñ (9 to 6)", value: { regular: 3 } },
                    { text: "ÌååÌä∏ÌÉÄÏûÑ (ÌïòÎ£® 2-4ÏãúÍ∞Ñ)", value: { parttime: 3 } },
                    { text: "ÍµêÎåÄ Í∑ºÎ¨¥ÎèÑ Í∞ÄÎä•", value: { shift: 3 } },
                    { text: "Ïú†Ïó∞Ìïú Í∑ºÎ¨¥ ÏãúÍ∞Ñ ÏÑ†Ìò∏", value: { flexible: 3 } }
                ]
            },
            {
                text: "Ï±ÖÏûÑÍ∞êÏùò Ï†ïÎèÑÎäî Ïñ¥Îäê Ï†ïÎèÑÎ•º ÏõêÌïòÏãúÎÇòÏöî?",
                options: [
                    { text: "ÎÜíÏùÄ Ï±ÖÏûÑÍ∞êÍ≥º ÏûêÏú®ÏÑ±ÏùÑ Í∞ÄÏßÑ ÏóÖÎ¨¥", value: { responsibility: 3 } },
                    { text: "Ï†ÅÎãπÌïú Ï±ÖÏûÑÍ∞êÏù¥ ÏûàÎäî ÏóÖÎ¨¥", value: { responsibility: 2 } },
                    { text: "Î™ÖÌôïÌïú ÏßÄÏãúÏóê Îî∞Î•¥Îäî ÏóÖÎ¨¥", value: { responsibility: 1 } },
                    { text: "Îã®ÏàúÌïòÍ≥† Î∞òÎ≥µÏ†ÅÏù∏ ÏóÖÎ¨¥", value: { responsibility: 0 } }
                ]
            },
            {
                text: "Í∞ÄÏû• Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤ÉÏùÄ?",
                options: [
                    { text: "ÏïàÏ†ïÏ†ÅÏù∏ ÏÜåÎìù", value: { income: 3 } },
                    { text: "ÏùºÍ≥º ÏÇ∂Ïùò Í∑†Ìòï", value: { balance: 3, flexible: 2 } },
                    { text: "ÏÇ¨Ìöå Í∏∞Ïó¨ÏôÄ Î≥¥Îûå", value: { service: 3, satisfaction: 3 } },
                    { text: "ÏÉàÎ°úÏö¥ ÎèÑÏ†ÑÍ≥º ÏÑ±Ïû•", value: { learning: 2, satisfaction: 2 } }
                ]
            },
            {
                text: "Í≥ºÍ±∞ Í≤ΩÎ†•Ïù¥ÎÇò ÌäπÍ∏∞Í∞Ä ÏûàÎã§Î©¥ Ïñ¥Îñ§ Î∂ÑÏïºÏù∏Í∞ÄÏöî?",
                options: [
                    { text: "ÏÇ¨Î¨¥/Í¥ÄÎ¶¨/ÌñâÏ†ï Î∂ÑÏïº", value: { office: 3 } },
                    { text: "Í∏∞Ïà†/ÏÉùÏÇ∞/Ï†úÏ°∞ Î∂ÑÏïº", value: { technical: 3 } },
                    { text: "ÏÑúÎπÑÏä§/ÌåêÎß§ Î∂ÑÏïº", value: { service: 3 } },
                    { text: "ÌäπÎ≥ÑÌïú Í≤ΩÎ†• ÏóÜÏùå/ÏÉàÎ°úÏö¥ ÎèÑÏ†Ñ", value: { new: 3 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let answers = [];
        let selectedOption = null;
        let selectedJob = null;

        function startTest() {
            document.getElementById('locationScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'block';
            showQuestion();
        }

        function showQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('questionNumber').textContent = `ÏßàÎ¨∏ ${currentQuestion + 1}/10`;
            document.getElementById('questionText').textContent = question.text;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    <span class="option-text">${option.text}</span>
                `;
                optionDiv.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            updateProgress();
            updateNavigation();
            selectedOption = null;
        }

        function selectOption(index) {
            selectedOption = index;
            
            document.querySelectorAll('.option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
            
            // ÏÑ†ÌÉù ÌõÑ ÏûêÎèôÏúºÎ°ú Îã§Ïùå ÏßàÎ¨∏ÏúºÎ°ú Ïù¥Îèô
            setTimeout(() => {
                nextQuestion();
            }, 300);
        }

        function nextQuestion() {
            if (selectedOption === null) return;
            
            answers[currentQuestion] = questions[currentQuestion].options[selectedOption].value;
            selectedAnswers[currentQuestion] = selectedOption + 1; // 1Î∂ÄÌÑ∞ ÏãúÏûëÌïòÎäî Î≤àÌò∏Î°ú Ï†ÄÏû•
            
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function updateProgress() {
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function updateNavigation() {
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
        }

        function calculateScores() {
            const scores = {};
            
            // Í∞Å ÏßÅÏóÖÎ≥Ñ Ï†êÏàò Í≥ÑÏÇ∞
            Object.keys(jobCategories).forEach(job => {
                scores[job] = 0;
                const jobInfo = jobCategories[job];
                
                // ÎãµÎ≥ÄÍ≥º ÏßÅÏóÖ ÌäπÏÑ± Îß§Ïπ≠
                answers.forEach(answer => {
                    // Ïã†Ï≤¥ ÌôúÎèô ÏÑ†Ìò∏ÎèÑ Îß§Ïπ≠
                    if (answer.physical !== undefined) {
                        if (jobInfo.physical === "high" && answer.physical >= 2) scores[job] += 3;
                        else if (jobInfo.physical === "medium" && answer.physical >= 1 && answer.physical <= 2) scores[job] += 3;
                        else if (jobInfo.physical === "low" && answer.physical <= 1) scores[job] += 3;
                    }
                    
                    // ÏÇ¨ÌöåÏ†Å ÏÉÅÌò∏ÏûëÏö© ÏÑ†Ìò∏ÎèÑ Îß§Ïπ≠
                    if (answer.social !== undefined) {
                        if (jobInfo.social === "high" && answer.social >= 2) scores[job] += 3;
                        else if (jobInfo.social === "medium" && answer.social >= 1 && answer.social <= 2) scores[job] += 3;
                        else if (jobInfo.social === "low" && answer.social <= 1) scores[job] += 3;
                    }
                    
                    // Ïä§Ìä∏Î†àÏä§ ÎÇ¥ÏÑ±Í≥º Ï±ÖÏûÑÍ∞ê Îß§Ïπ≠
                    if (answer.responsibility !== undefined) {
                        if (jobInfo.stress === "high" && answer.responsibility >= 2) scores[job] += 2;
                        else if (jobInfo.stress === "medium" && answer.responsibility >= 1 && answer.responsibility <= 2) scores[job] += 2;
                        else if (jobInfo.stress === "low" && answer.responsibility <= 1) scores[job] += 2;
                    }
                    
                    // Í∏∞Ïà† ÏàôÎ†®ÎèÑÏôÄ ÌïôÏäµ ÏùòÌñ• Îß§Ïπ≠
                    if (answer.learning !== undefined) {
                        if (jobInfo.skill === "high" && answer.learning >= 2) scores[job] += 2;
                        else if (jobInfo.skill === "medium" && answer.learning >= 1 && answer.learning <= 2) scores[job] += 2;
                        else if (jobInfo.skill === "low" && answer.learning <= 1) scores[job] += 2;
                    }
                    
                    // Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Ï∂îÍ∞Ä Ï†êÏàò
                    
                    if (answer.care && jobInfo.category === "ÎèåÎ¥Ñ") scores[job] += answer.care * 2;
                    if (answer.education && jobInfo.category === "ÍµêÏú°") scores[job] += answer.education * 2;
                    if (answer.technical && jobInfo.category === "Í∏∞Ïà†") scores[job] += answer.technical * 5; // ÏãúÏÑ§¬∑ÏÑ§ÎπÑ Í¥ÄÎ¶¨Ïõê Í∞ÄÏ§ëÏπò Ï¶ùÍ∞Ä
                    if (answer.service && jobInfo.category === "ÎèåÎ¥Ñ") scores[job] += answer.service; // ÏÑúÎπÑÏä§ Í∞ÄÏ§ëÏπòÎ•º ÎèåÎ¥Ñ Î∂ÑÏïºÏóêÎßå Ï†ÅÏö©
                    if (answer.service && jobInfo.category === "ÏÑúÎπÑÏä§") scores[job] += Math.floor(answer.service * 0.8); // ÏÑúÎπÑÏä§ÏßÅ Í∞ÄÏ§ëÏπò ÎåÄÌè≠ Í∞êÏÜå
                    if (answer.office && (jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "ÏùòÎ£åÏÇ¨Î¨¥")) scores[job] += answer.office * 2;
                    
                    // ÌäπÎ≥Ñ Î≥¥ÎÑàÏä§
                    if (answer.morning && jobInfo.category === "Ïö¥ÏÜ°") scores[job] += 2;
                    if (answer.morning && jobInfo.category === "ÏúÑÏÉù") scores[job] += 2;
                    if (answer.morning && jobInfo.category === "Î∞∞Îã¨") scores[job] += 2;
                    if (answer.flexible && jobInfo.category === "ÍµêÏú°") scores[job] += 2;
                    
                    // ÌååÌä∏ÌÉÄÏûÑ ÏÑ†ÌÉù Ïãú ÍµêÏú° Ï¢ÖÏÇ¨Ïûê(ÏãúÎãàÏñ¥Í∞ïÏÇ¨)Ïóê Îß§Ïö∞ ÎÜíÏùÄ Í∞ÄÏ§ëÏπò
                    if (answer.parttime && job === "ÍµêÏú° Ï¢ÖÏÇ¨Ïûê") scores[job] += 50;
                    if (answer.parttime && job === "ÎèÑÎ≥¥ Î∞∞Îã¨Ïõê") scores[job] += 2;
                    
                    if (answer.regular && (jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "ÏùòÎ£åÏÇ¨Î¨¥")) scores[job] += 2;
                    if (answer.shift && jobInfo.category === "Î≥¥Ïïà") scores[job] += 2;
                    
                    // Í∑ºÎ¨¥ ÌôòÍ≤Ω Îß§Ïπ≠
                    if (answer.indoor && (jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "ÍµêÏú°" || jobInfo.category === "ÏùòÎ£åÏÇ¨Î¨¥")) scores[job] += 2;
                    if (answer.outdoor && (jobInfo.category === "ÏúÑÏÉù" || jobInfo.category === "Î∞∞Îã¨")) scores[job] += 2;
                    if (answer.mobile && (jobInfo.category === "Ïö¥ÏÜ°" || jobInfo.category === "Î∞∞Îã¨")) scores[job] += 3;
                    
                    // ÏÜåÎìùÍ≥º ÎßåÏ°±ÎèÑ Îß§Ïπ≠
                    if (answer.income >= 2 && (jobInfo.category === "Í∏∞Ïà†" || jobInfo.category === "Ïö¥ÏÜ°")) scores[job] += 1;
                    if (answer.satisfaction >= 2 && (jobInfo.category === "ÍµêÏú°" || jobInfo.category === "Î≥µÏßÄ" || jobInfo.category === "ÎèåÎ¥Ñ")) scores[job] += 1;
                    if (answer.balance >= 2 && (jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "ÏùòÎ£åÏÇ¨Î¨¥")) scores[job] += 1;
                    
                    // Í≤ΩÎ†• Îß§Ïπ≠
                    if (answer.office && (jobInfo.category === "ÏÇ¨Î¨¥" || jobInfo.category === "ÏùòÎ£åÏÇ¨Î¨¥")) scores[job] += 3;
                    if (answer.technical && jobInfo.category === "Í∏∞Ïà†") scores[job] += 3;
                    if (answer.service && jobInfo.category === "ÏÑúÎπÑÏä§") scores[job] += 3;
                    if (answer.new && jobInfo.skill === "low") scores[job] += 2;
                });
            });
            
            // ÏÉÅÏúÑ 3Í∞ú ÏßÅÏóÖ ÏÑ†ÌÉù
            const sortedJobs = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 3)
                .map(([job, score], index) => {
                    // 1ÏúÑÎäî 85-95%, 2ÏúÑÎäî 75-85%, 3ÏúÑÎäî 65-75%
                    const baseRate = index === 0 ? 85 : index === 1 ? 75 : 65;
                    const bonus = Math.min(10, Math.floor(score / 5));
                    return { 
                        job, 
                        score, 
                        matchRate: baseRate + bonus
                    };
                });
            
            return sortedJobs;
        }

        function showResults() {
            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('resultScreen').style.display = 'block';
            
            const recommendedJobs = calculateScores();
            const jobsContainer = document.getElementById('recommendedJobs');
            jobsContainer.innerHTML = '';
            
            recommendedJobs.forEach((result, index) => {
                const jobInfo = jobCategories[result.job];
                const jobDiv = document.createElement('div');
                jobDiv.className = 'job-item';
                jobDiv.onclick = () => selectJob(result.job);
                jobDiv.innerHTML = `
                    <div>
                        <span class="job-rank">${index + 1}</span>
                        <span class="job-name">${result.job}</span>
                        <span class="job-match">${result.matchRate}% Ï†ÅÌï©</span>
                    </div>
                    <div class="job-description">${jobInfo.description}</div>
                `;
                jobsContainer.appendChild(jobDiv);
            });
            
            // SupabaseÏóê Í≤∞Í≥º Ï†ÄÏû•
            saveResultsToSupabase(recommendedJobs);
        }
        
        // SupabaseÏóê Í≤∞Í≥º Ï†ÄÏû•ÌïòÎäî Ìï®Ïàò
        async function saveResultsToSupabase(recommendedJobs) {
            // SupabaseÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Ï†ÄÏû•ÌïòÏßÄ ÏïäÏùå
            if (!supabase) {
                console.log('SupabaseÍ∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïÑ Í≤∞Í≥ºÎ•º Ï†ÄÏû•ÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
                return;
            }
            
            try {
                // IP Ï£ºÏÜå Í∞ÄÏ†∏Ïò§Í∏∞ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
                let ipAddress = null;
                try {
                    const ipResponse = await fetch('https://api.ipify.org?format=json');
                    const ipData = await ipResponse.json();
                    ipAddress = ipData.ip;
                } catch (ipError) {
                    console.log('IP Ï£ºÏÜåÎ•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§:', ipError);
                }
                
                // ÏÑ∏ÏÖò ID Í∞ÄÏ†∏Ïò§Í∏∞
                const sessionId = getOrCreateSessionId();
                
                // Claude.ai ÌôòÍ≤Ω Ï≤¥ÌÅ¨
                const isClaudeEnvironment = typeof window !== 'undefined' && 
                                           window.location && 
                                           window.location.hostname.includes('claude.ai');
                
                // ÏÑ†ÌÉùÌïú ÎãµÎ≥ÄÎì§ÏùÑ Î¨∏ÏûêÏó¥Î°ú Î≥ÄÌôò (Ïòà: "1,2,4,2,1,2,3,4,1,1")
                const answersString = selectedAnswers.join(',');
                
                // Ï∂îÍ∞Ä ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏàòÏßë
                const isReturningUser = !isClaudeEnvironment && localStorage.getItem('seniorJobTestUserId') ? true : false;
                const visitCount = !isClaudeEnvironment ? (parseInt(localStorage.getItem('seniorJobTestVisitCount') || '1')) : 1;
                
                const { data, error } = await supabase
                    .from('senior_job_test_results')
                    .insert([
                        {
                            session_id: sessionId,
                            job_1: recommendedJobs[0].job,
                            job_1_match_rate: recommendedJobs[0].matchRate,
                            job_2: recommendedJobs[1].job,
                            job_2_match_rate: recommendedJobs[1].matchRate,
                            job_3: recommendedJobs[2].job,
                            job_3_match_rate: recommendedJobs[2].matchRate,
                            answers: answersString,
                            location_city: userLocation,  // ÏßÄÏó≠Íµ¨ Ï†ïÎ≥¥ Ï∂îÍ∞Ä
                            user_agent: navigator.userAgent,
                            ip_address: ipAddress
                        }
                    ]);
                
                if (error) {
                    console.error('Í≤∞Í≥º Ï†ÄÏû• Ï§ë Ïò§Î•ò:', error);
                } else {
                    console.log('Í≤∞Í≥ºÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§.');
                    console.log('ÏÇ¨Ïö©Ïûê ID:', sessionId);
                    console.log('ÏÇ¨Ïö©Ïûê ÏßÄÏó≠:', userLocation);
                    console.log('Ïû¨Î∞©Î¨∏ ÏÇ¨Ïö©Ïûê:', isReturningUser);
                    console.log('Ï¥ù Î∞©Î¨∏ ÌöüÏàò:', visitCount);
                    console.log('ÏÑ†ÌÉùÌïú ÎãµÎ≥Ä:', answersString);
                }
            } catch (err) {
                console.error('Supabase Ïó∞Í≤∞ Ïò§Î•ò:', err);
            }
        }

        function restartTest() {
            currentQuestion = 0;
            answers = [];
            selectedAnswers = [];
            selectedOption = null;
            selectedJob = null;
            userLocation = '';
            
            // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('questionScreen').style.display = 'none';
            document.getElementById('locationScreen').style.display = 'none';
            // ÏãúÏûë ÌôîÎ©¥ ÌëúÏãú
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('progressFill').style.width = '0%';
            
            // ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî
            document.getElementById('locationInput').value = '';
            checkLocationInput();
        }
        
        function selectJob(job) {
            selectedJob = job;
            const jobInfo = jobCategories[job];
            
            // ÏÑ†ÌÉù Î™®Îã¨ ÏÉùÏÑ±
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 40px;
                border-radius: 20px;
                max-width: 500px;
                width: 90%;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `;
            
            modalContent.innerHTML = `
                <h2 style="color: #333; margin-bottom: 10px;">ÏÑ†ÌÉùÌïòÏã† ÏßÅÏóÖ</h2>
                <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 30px;">
                    <div style="color: #667eea; font-size: 1.4em; font-weight: 600;">${job}</div>
                </div>
                <h3 style="color: #333; margin-bottom: 20px;">Í¥ÄÎ†® Í≤ΩÎ†•Ïù¥ÎÇò ÏûêÍ≤©Ï¶ùÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî?</h3>
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <div onclick="handleQualification(true); document.body.removeChild(this.parentElement.parentElement.parentElement);"
                         style="background: white;
                                border: 2px solid #e9ecef;
                                border-radius: 15px;
                                padding: 20px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);"
                         onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-3px)'; this.style.boxShadow='0 5px 20px rgba(102, 126, 234, 0.2)';"
                         onmouseout="this.style.borderColor='#e9ecef'; this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(0, 0, 0, 0.05)';">
                        <h4 style="color: #333; font-size: 1.2em; margin-bottom: 10px;">üìã Í≤ΩÎ†•Ïù¥ÎÇò ÏûêÍ≤©Ï¶ùÏù¥ ÏûàÏùå</h4>
                        <p style="color: #666; font-size: 0.95em; line-height: 1.5; margin: 0;">
                            Í¥ÄÎ†® Î∂ÑÏïºÏùò Í≤ΩÎ†•Ïù¥ÎÇò ÏûêÍ≤©Ï¶ùÏùÑ Î≥¥Ïú†ÌïòÍ≥† ÏûàÏñ¥ Î∞îÎ°ú ÏßÄÏõê Í∞ÄÎä•Ìï©ÎãàÎã§.
                        </p>
                    </div>
                    <div onclick="handleQualification(false); document.body.removeChild(this.parentElement.parentElement.parentElement);"
                         style="background: white;
                                border: 2px solid #e9ecef;
                                border-radius: 15px;
                                padding: 20px;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);"
                         onmouseover="this.style.borderColor='#667eea'; this.style.transform='translateY(-3px)'; this.style.boxShadow='0 5px 20px rgba(102, 126, 234, 0.2)';"
                         onmouseout="this.style.borderColor='#e9ecef'; this.style.transform='translateY(0)'; this.style.boxShadow='0 3px 10px rgba(0, 0, 0, 0.05)';">
                        <h4 style="color: #333; font-size: 1.2em; margin-bottom: 10px;">üìö Í≤ΩÎ†•Ïù¥ÎÇò ÏûêÍ≤©Ï¶ùÏù¥ ÏóÜÏùå</h4>
                        <p style="color: #666; font-size: 0.95em; line-height: 1.5; margin: 0;">
                            ÏÉàÎ°≠Í≤å ÎèÑÏ†ÑÌïòÍ≥†Ïûê ÌïòÎ©∞, ÌïÑÏöîÏãú ÍµêÏú°Ïù¥ÎÇò ÏûêÍ≤©Ï¶ù Ï∑®ÎìùÏùÑ Í≥†Î†§ÌïòÍ≥† ÏûàÏäµÎãàÎã§.
                        </p>
                    </div>
                </div>
                <button onclick="document.body.removeChild(this.parentElement.parentElement);" 
                        style="margin-top: 20px;
                               background: #e9ecef;
                               color: #495057;
                               border: none;
                               padding: 12px 30px;
                               font-size: 1em;
                               border-radius: 50px;
                               cursor: pointer;
                               transition: all 0.3s ease;"
                        onmouseover="this.style.background='#dee2e6';"
                        onmouseout="this.style.background='#e9ecef';">
                    Ï∑®ÏÜå
                </button>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }
        
        function handleQualification(hasQualification) {
            const jobInfo = jobCategories[selectedJob];
            
            // ÏïΩÍµ≠ ÏÇ¨Î¨¥ÏõêÍ≥º ÎèÑÎ≥¥ Î∞∞Îã¨ÏõêÏùÄ ÏûêÍ≤©Ï¶ù Ïú†Î¨¥ÏôÄ Í¥ÄÍ≥ÑÏóÜÏù¥ Ïò§ÎπÑÏÑú Ïï±ÏúºÎ°ú Ïó∞Í≤∞
            if (selectedJob === "ÏïΩÍµ≠ ÏÇ¨Î¨¥Ïõê" || selectedJob === "ÎèÑÎ≥¥ Î∞∞Îã¨Ïõê") {
                showObiseoModal();
                return;
            }
            
            if (hasQualification) {
                // Í≥†Ïö©24Î°ú Ïù¥Îèô - Ï≤´ Î≤àÏß∏ ÌÇ§ÏõåÎìúÎßå ÏÇ¨Ïö©
                const searchKeyword = jobInfo.keywords[0];
                
                // Ï†úÏô∏ Í≤ÄÏÉâÏñ¥ ÏÑ§Ï†ï
                const allExcludeKeywords = ['ÏöîÏñë', 'ÎØ∏ÌôîÏõê', 'Í≤ΩÎπÑ', 'Î≥¥Ïïà', 'Ïö¥Ï†Ñ', 'Í¥ÄÎ¶¨ÏÜåÏû•', 'Ï≤≠ÏÜåÏõê', 'ÏãúÏÑ§'];
                
                // Í≤ÄÏÉâ ÌÇ§ÏõåÎìúÏóê Ìè¨Ìï®Îêú Îã®Ïñ¥Îì§ÏùÑ Ï†úÏô∏ Í≤ÄÏÉâÏñ¥ÏóêÏÑú Ï†úÍ±∞
                const excludeKeywords = allExcludeKeywords.filter(excludeWord => {
                    // ÌòÑÏû¨ ÏßÅÏóÖÏùò Î™®Îì† ÌÇ§ÏõåÎìúÎ•º ÌôïÏù∏
                    return !jobInfo.keywords.some(keyword => 
                        keyword.includes(excludeWord) || excludeWord.includes(keyword)
                    );
                });
                
                const baseUrl = 'https://www.work24.go.kr/wk/a/b/1200/retriveDtlEmpSrchList.do';
                const params = new URLSearchParams({
                    'srcKeyword': searchKeyword,
                    'notSrcKeyword': excludeKeywords.join(','),
                    'region': '11000',
                    'regionParam': '11000',
                    'codeDepth1Info': '11000',
                    'codeDepth2Info': '11000',
                    'resultCnt': '10',
                    'sortField': 'DATE',
                    'sortOrderBy': 'DESC',
                    'siteClcd': 'all',
                    'searchMode': 'Y',
                    'academicGbnoEdu': 'noEdu',
                    'pageIndex': '1',
                    'currentPageNo': '1',
                    'pfMatterPreferential': 'B',  // Ï§ëÏû•ÎÖÑ Ïö∞ÎåÄ ÏÑ§Ï†ï
                    'moreButtonYn': 'Y'
                });
                
                // ÏÉà Ï∞ΩÏóêÏÑú Í≥†Ïö©24 Í≤ÄÏÉâ Í≤∞Í≥º Ïó¥Í∏∞
                const searchUrl = `${baseUrl}?${params.toString()}#scrollLoc`;
                
                // ÏïàÎÇ¥ Î™®Îã¨ ÌëúÏãú
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 1000;
                `;
                
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: white;
                    padding: 40px;
                    border-radius: 20px;
                    max-width: 500px;
                    text-align: center;
                    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
                `;
                
                modalContent.innerHTML = `
                    <h2 style="color: #333; margin-bottom: 20px;">${selectedJob} ÏùºÏûêÎ¶¨ Ï∞æÍ∏∞</h2>
                    <p style="color: #666; line-height: 1.8; margin-bottom: 30px;">
                        Í≥†Ïö©24(Work24) ÏÇ¨Ïù¥Ìä∏ÏóêÏÑú<br>
                        <strong style="color: #667eea;">"${selectedJob}"</strong> Í¥ÄÎ†® ÏùºÏûêÎ¶¨Î•º Í≤ÄÏÉâÌï©ÎãàÎã§.<br><br>
                        <span style="color: #667eea; font-weight: 600;">Ï§ëÏû•ÎÖÑ Ïö∞ÎåÄ</span> Ï°∞Í±¥ÏúºÎ°ú Í≤ÄÏÉâÎê©ÎãàÎã§.<br>
                        ÏÉà Ï∞ΩÏóêÏÑú Í≤ÄÏÉâ Í≤∞Í≥ºÎ•º ÌôïÏù∏ÌïòÏã§ Ïàò ÏûàÏäµÎãàÎã§.
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="
                            window.open('${searchUrl}', '_blank');
                            document.body.removeChild(this.parentElement.parentElement.parentElement);
                        " 
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                       color: white; 
                                       border: none; 
                                       padding: 15px 30px; 
                                       border-radius: 50px; 
                                       cursor: pointer;
                                       font-size: 1.1em;">
                            Í≥†Ïö©24ÏóêÏÑú Í≤ÄÏÉâÌïòÍ∏∞
                        </button>
                        <button onclick="document.body.removeChild(this.parentElement.parentElement.parentElement);" 
                                style="background: #e9ecef; 
                                       color: #495057; 
                                       border: none; 
                                       padding: 15px 30px; 
                                       border-radius: 50px; 
                                       cursor: pointer;
                                       font-size: 1.1em;">
                            Ï∑®ÏÜå
                        </button>
                    </div>
                `;
                
                modal.appendChild(modalContent);
                document.body.appendChild(modal);
                
            } else {
                showObiseoModal();
            }
        }
        
        function showObiseoModal() {
            // Ïò§ÎπÑÏÑú Ïï± ÏïàÎÇ¥ Î™®Îã¨
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
            `;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 40px;
                border-radius: 20px;
                max-width: 500px;
                text-align: center;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `;
            
            modalContent.innerHTML = `
                <h2 style="color: #333; margin-bottom: 20px;">${selectedJob} Ï∑®ÏóÖ Ï†ïÎ≥¥</h2>
                <p style="color: #666; line-height: 1.8; margin-bottom: 20px;">
                    <strong style="color: #667eea;">${selectedJob}</strong> Í¥ÄÎ†® Ï†ïÎ≥¥Î•º Ï∞æÍ≥† Í≥ÑÏãúÎäîÍµ∞Ïöî!
                </p>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <p style="color: #495057; line-height: 1.6; margin: 0;">
                        Ï±ÑÏö© Ï†ïÎ≥¥ÏôÄ ÏûêÍ≤© ÏöîÍ±¥ÏùÑ<br>
                        <strong style="color: #667eea;">Ïò§ÎπÑÏÑú Ïï±</strong>ÏóêÏÑú ÏûêÏÑ∏Ìûà ÏïåÏïÑÎ≥¥ÏÑ∏Ïöî!
                    </p>
                </div>
                <p style="color: #666; font-size: 0.9em; margin-bottom: 20px;">
                    ÏãúÎãàÏñ¥ ÎßûÏ∂§Ìòï Ï∑®ÏóÖ Ï†ïÎ≥¥ÏôÄ<br>
                    Îã§ÏñëÌïú ÏùºÏûêÎ¶¨ Ï†ïÎ≥¥Î•º ÌôïÏù∏ÌïòÏã§ Ïàò ÏûàÏäµÎãàÎã§.
                </p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button onclick="
                        window.open('https://play.google.com/store/apps/details?id=chatGPT_for_senior.myapplication&hl=ko', '_blank');
                        document.body.removeChild(this.parentElement.parentElement.parentElement);
                    " 
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                   color: white; 
                                   border: none; 
                                   padding: 15px 30px; 
                                   border-radius: 50px; 
                                   cursor: pointer;
                                   font-size: 1.1em;">
                        Ïò§ÎπÑÏÑú Ïï±ÏóêÏÑú ÏûêÏÑ∏Ìûà ÏïåÏïÑÎ≥¥Í∏∞
                    </button>
                    <button onclick="document.body.removeChild(this.parentElement.parentElement.parentElement);" 
                            style="background: #e9ecef; 
                                   color: #495057; 
                                   border: none; 
                                   padding: 15px 30px; 
                                   border-radius: 50px; 
                                   cursor: pointer;
                                   font-size: 1.1em;">
                        Îã´Í∏∞
                    </button>
                </div>
            `;
            
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }

        // ÌôîÎ©¥ ÌÅ¨Í∏∞ Î≥ÄÍ≤Ω Ïãú Î™®Î∞îÏùº Î©îÎâ¥ ÏûêÎèô Îã´Í∏∞
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('sidebarOverlay');
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('show');
            }
        });
    </script>
</body>
</html>